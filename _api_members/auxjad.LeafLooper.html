

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>auxjad.LeafLooper &mdash; auxjad 0.8.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="auxjad.leaves_are_tieable" href="auxjad.leaves_are_tieable.html" />
    <link rel="prev" title="auxjad.LeafDynMaker" href="auxjad.LeafDynMaker.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> auxjad
          

          
          </a>

          
            
            
              <div class="version">
                0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to auxjad’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples of usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">auxjad API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="auxjad.ArtificialHarmonic.html">auxjad.ArtificialHarmonic</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.CartographySelector.html">auxjad.CartographySelector</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.close_container.html">auxjad.close_container</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.container_is_full.html">auxjad.container_is_full</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.containers_are_equal.html">auxjad.containers_are_equal</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.Drifter.html">auxjad.Drifter</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.enforce_time_signature.html">auxjad.enforce_time_signature</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.Fader.html">auxjad.Fader</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.fill_with_rests.html">auxjad.fill_with_rests</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.HarmonicNote.html">auxjad.HarmonicNote</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.Hocketer.html">auxjad.Hocketer</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.LeafDynMaker.html">auxjad.LeafDynMaker</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">auxjad.LeafLooper</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.leaves_are_tieable.html">auxjad.leaves_are_tieable</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.ListLooper.html">auxjad.ListLooper</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.Phaser.html">auxjad.Phaser</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.prettify_rewrite_meter.html">auxjad.prettify_rewrite_meter</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.remove_empty_tuplets.html">auxjad.remove_empty_tuplets</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.remove_repeated_dynamics.html">auxjad.remove_repeated_dynamics</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.remove_repeated_time_signatures.html">auxjad.remove_repeated_time_signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.repeat_container.html">auxjad.repeat_container</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.reposition_clefs.html">auxjad.reposition_clefs</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.reposition_dynamics.html">auxjad.reposition_dynamics</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.respell_chord.html">auxjad.respell_chord</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.respell_container.html">auxjad.respell_container</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.rests_to_multimeasure_rest.html">auxjad.rests_to_multimeasure_rest</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.Shuffler.html">auxjad.Shuffler</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.simplified_time_signature_ratio.html">auxjad.simplified_time_signature_ratio</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.sync_containers.html">auxjad.sync_containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.TenneySelector.html">auxjad.TenneySelector</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.time_signature_extractor.html">auxjad.time_signature_extractor</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.underfull_duration.html">auxjad.underfull_duration</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxjad.WindowLooper.html">auxjad.WindowLooper</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api.html#indices-and-tables">Indices and tables</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">auxjad</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../api.html">auxjad API</a> &raquo;</li>
        
      <li>auxjad.LeafLooper</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_api_members/auxjad.LeafLooper.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="auxjad-leaflooper">
<h1>auxjad.LeafLooper<a class="headerlink" href="#auxjad-leaflooper" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="auxjad.LeafLooper">
<em class="property">class </em><code class="sig-prename descclassname">auxjad.</code><code class="sig-name descname">LeafLooper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">contents</span><span class="p">:</span> <span class="n">abjad.core.Container.Container</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">window_size</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">step_size</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">max_steps</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">1</span></em>, <em class="sig-param"><span class="n">repetition_chance</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">forward_bias</span><span class="p">:</span> <span class="n">float</span> <span class="o">=</span> <span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">head_position</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">0</span></em>, <em class="sig-param"><span class="n">omit_time_signatures</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">processs_on_first_call</span><span class="p">:</span> <span class="n">bool</span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#auxjad.LeafLooper" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">LeafLooper</span></code> outputs slices of an <code class="docutils literal notranslate"><span class="pre">abjad.Container</span></code> using the
metaphor of a looping window of a constant number of elements. This number
is given by the argument <code class="docutils literal notranslate"><span class="pre">window_size</span></code>, which is an <code class="docutils literal notranslate"><span class="pre">int</span></code> representing
how many notes are to be included in each slice. The duration of the slice
will be the sum of the duration of these notes.</p>
<p>For instance, if the initial container had the logical ties
<code class="docutils literal notranslate"><span class="pre">[A,</span> <span class="pre">B,</span> <span class="pre">C,</span> <span class="pre">D,</span> <span class="pre">E,</span> <span class="pre">F]</span></code> (where each letter represents one logical tie) and
the looping window was size <code class="docutils literal notranslate"><span class="pre">3</span></code>, the output would be:</p>
<p><code class="docutils literal notranslate"><span class="pre">A</span> <span class="pre">B</span> <span class="pre">C</span> <span class="pre">B</span> <span class="pre">C</span> <span class="pre">D</span> <span class="pre">C</span> <span class="pre">D</span> <span class="pre">E</span> <span class="pre">D</span> <span class="pre">E</span> <span class="pre">F</span> <span class="pre">E</span> <span class="pre">F</span> <span class="pre">F</span></code></p>
<p>This can be better visualised as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A B C
  B C D
    C D E
      D E F
        E F
          F
</pre></div>
</div>
<dl>
<dt>Example:</dt><dd><p>Calling the object will return an <code class="docutils literal notranslate"><span class="pre">abjad.Selection</span></code> generated by
the looping process. It takes a container (or child class equivalent)
and the number of elements of the window as arguments. Each call of the
object will move the window forwards and output the result.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 e&#39;4 f&#39;2 ~ f&#39;8 g&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-1.png" src="../_images/image-LeafLooper-1.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 11/8</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;2</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-2.png" src="../_images/image-LeafLooper-2.png" />
</div>
<p>The property <code class="docutils literal notranslate"><span class="pre">current_window</span></code> can be used to access the current
window without moving the head forwards.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="o">.</span><span class="n">current_window</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 11/8</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;2</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-3.png" src="../_images/image-LeafLooper-3.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>The very first call will output the input container without processing
it. To disable this behaviour and have the looping window move on the
very first call, initialise the class with the keyword argument
<code class="docutils literal notranslate"><span class="pre">processs_on_first_call</span></code> set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 e&#39;4 f&#39;2 ~ f&#39;8 g&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">processs_on_first_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 11/8</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;2</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-4.png" src="../_images/image-LeafLooper-4.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>The instances of <code class="docutils literal notranslate"><span class="pre">LeafLooper</span></code> can also be used as an iterator, which
can then be used in a for loop to exhaust all windows. Note that unlike
the methods <code class="docutils literal notranslate"><span class="pre">output_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">output_all()</span></code>, time signatures are
added to each window returned by the shuffler. Use the function
<code class="docutils literal notranslate"><span class="pre">auxjad.remove_repeated_time_signatures()</span></code> to clean the output when
using <code class="docutils literal notranslate"><span class="pre">LeafLooper</span></code> in this way.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 e&#39;8 f&#39;2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">window</span> <span class="ow">in</span> <span class="n">looper</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">staff</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">remove_repeated_time_signatures</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    \time 5/8</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;2</span>
<span class="go">    \time 2/4</span>
<span class="go">    f&#39;2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-5.png" src="../_images/image-LeafLooper-5.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>This class can take many optional keyword arguments during its
creation. <code class="docutils literal notranslate"><span class="pre">step_size</span></code> dictates the size of each individual step in
number of elements (default value is <code class="docutils literal notranslate"><span class="pre">1</span></code>). <code class="docutils literal notranslate"><span class="pre">max_steps</span></code> sets the
maximum number of steps that the window can advance when the object is
called, ranging between <code class="docutils literal notranslate"><span class="pre">1</span></code> and the input value (default is also
<code class="docutils literal notranslate"><span class="pre">1</span></code>). <code class="docutils literal notranslate"><span class="pre">repetition_chance</span></code> sets the chance of a window result
repeating itself (that is, the window not moving forwards when called).
It should range from <code class="docutils literal notranslate"><span class="pre">0.0</span></code> to <code class="docutils literal notranslate"><span class="pre">1.0</span></code> (default <code class="docutils literal notranslate"><span class="pre">0.0</span></code>, i.e. no
repetition). <code class="docutils literal notranslate"><span class="pre">forward_bias</span></code> sets the chance of the window moving
forward instead of backwards. It should range from <code class="docutils literal notranslate"><span class="pre">0.0</span></code> to <code class="docutils literal notranslate"><span class="pre">1.0</span></code>
(default <code class="docutils literal notranslate"><span class="pre">1.0</span></code>, which means the window can only move forwards. A
value of <code class="docutils literal notranslate"><span class="pre">0.5</span></code> gives 50% chance of moving forwards while a value of
<code class="docutils literal notranslate"><span class="pre">0.0</span></code> will move the window only backwards). Lastly, <code class="docutils literal notranslate"><span class="pre">head_position</span></code>
can be used to offset the starting position of the looping window. It
must be an integer and its default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 e&#39;4 f&#39;2 ~ f&#39;8 g&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">step_size</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">max_steps</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">repetition_chance</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">forward_bias</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">head_position</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">omit_time_signatures</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">processs_on_first_call</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">window_size</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">step_size</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">repetition_chance</span>
<span class="go">0.25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">forward_bias</span>
<span class="go">0.2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">max_steps</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">head_position</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">omit_time_signatures</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">processs_on_first_call</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Use the properties below to change these values after initialisation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">window_size</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">step_size</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">max_steps</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">repetition_chance</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">forward_bias</span> <span class="o">=</span> <span class="mf">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">head_position</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">omit_time_signatures</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">processs_on_first_call</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">window_size</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">step_size</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">max_steps</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">repetition_chance</span>
<span class="go">0.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">forward_bias</span>
<span class="go">0.8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">head_position</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">omit_time_signatures</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">processs_on_first_call</span>
<span class="go">False</span>
</pre></div>
</div>
</dd>
<dt>Example:</dt><dd><p>Set <code class="docutils literal notranslate"><span class="pre">forward_bias</span></code> to <code class="docutils literal notranslate"><span class="pre">0.0</span></code> to move backwards instead of forwards
(default is <code class="docutils literal notranslate"><span class="pre">1.0</span></code>). The initial <code class="docutils literal notranslate"><span class="pre">head_position</span></code> must be greater
than <code class="docutils literal notranslate"><span class="pre">0</span></code> otherwise the contents will already be exhausted in the very
first call (since it will not be able to move backwards from that
position).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">head_position</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">forward_bias</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="o">.</span><span class="n">output_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-6.png" src="../_images/image-LeafLooper-6.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>Setingt <code class="docutils literal notranslate"><span class="pre">forward_bias</span></code> to a value in between <code class="docutils literal notranslate"><span class="pre">0.0</span></code> and <code class="docutils literal notranslate"><span class="pre">1.0</span></code> will
result in random steps being taken forward or backward, according to
the bias. The initial value of <code class="docutils literal notranslate"><span class="pre">head_position</span></code> will once gain play
an important role here, as the contents might be exhausted if the
looper attempts to move backwards after reaching the head position
<code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4 b&#39;4 c&#39;&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">head_position</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">forward_bias</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="o">.</span><span class="n">output_n</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-7.png" src="../_images/image-LeafLooper-7.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>Setting the keyword argument <code class="docutils literal notranslate"><span class="pre">max_steps</span></code> to a value larger than <code class="docutils literal notranslate"><span class="pre">1</span></code>
will result in a random number of steps (between <code class="docutils literal notranslate"><span class="pre">1</span></code> and
<code class="docutils literal notranslate"><span class="pre">max_steps</span></code>) being applied at each call.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4 b&#39;4 c&#39;&#39;4 d&#39;&#39;4 e&#39;&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">max_steps</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="o">.</span><span class="n">output_n</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;4</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;4</span>
<span class="go">    d&#39;&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-8.png" src="../_images/image-LeafLooper-8.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>To disable time signatures altogether, initialise <code class="docutils literal notranslate"><span class="pre">LeafLooper</span></code> with
the keyword argument <code class="docutils literal notranslate"><span class="pre">omit_time_signatures</span></code> set to <code class="docutils literal notranslate"><span class="pre">True</span></code> (default
is <code class="docutils literal notranslate"><span class="pre">False</span></code>), or use the <code class="docutils literal notranslate"><span class="pre">omit_time_signatures</span></code> property after
initialisation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 e&#39;4 f&#39;2 ~ f&#39;8 g&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">omit_time_signatures</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-9.png" src="../_images/image-LeafLooper-9.png" />
</div>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>All methods that return an <code class="docutils literal notranslate"><span class="pre">abjad.Selection</span></code> will add an initial time
signature to it. The <code class="docutils literal notranslate"><span class="pre">output_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">output_all()</span></code> methods
automatically remove repeated time signatures. When joining selections
output by multiple method calls, use
<code class="docutils literal notranslate"><span class="pre">auxjad.remove_repeated_time_signatures()</span></code> on the whole container
after fusing the selections to remove any unecessary time signature
changes.</p>
</div>
<dl>
<dt>Example:</dt><dd><p>The function <code class="docutils literal notranslate"><span class="pre">len()</span></code> can be used to get the total number of elements
in the contents.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 e&#39;4 f&#39;2 ~ f&#39;8 g&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">looper</span><span class="p">)</span>
<span class="go">5</span>
</pre></div>
</div>
</dd>
<dt>Example:</dt><dd><p>To run through the whole process and output it as a single container,
from the initial head position until the process outputs the single
last element, use the method <code class="docutils literal notranslate"><span class="pre">output_all()</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">window</span> <span class="o">=</span> <span class="n">looper</span><span class="o">.</span><span class="n">output_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    \time 2/4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    \time 2/4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    \time 1/4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-10.png" src="../_images/image-LeafLooper-10.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>When using <code class="docutils literal notranslate"><span class="pre">output_all()</span></code>, set the keyword argument
<code class="docutils literal notranslate"><span class="pre">tie_identical_pitches</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> in order to tie identical notes
or chords at the end and beginning of consecutive windows.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 r8 d&#39;4 &lt;e&#39; g&#39;&gt;8 r4 f&#39;2. &lt;e&#39; g&#39;&gt;16&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="o">.</span><span class="n">output_all</span><span class="p">(</span><span class="n">tie_identical_pitches</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 9/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    r8</span>
<span class="go">    d&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 4/4</span>
<span class="go">    d&#39;2</span>
<span class="go">    r8</span>
<span class="go">    d&#39;4</span>
<span class="go">    &lt;e&#39; g&#39;&gt;8</span>
<span class="go">    \time 3/4</span>
<span class="go">    r8</span>
<span class="go">    d&#39;4</span>
<span class="go">    &lt;e&#39; g&#39;&gt;8</span>
<span class="go">    r4</span>
<span class="go">    \time 11/8</span>
<span class="go">    d&#39;4</span>
<span class="go">    &lt;e&#39; g&#39;&gt;8</span>
<span class="go">    r4</span>
<span class="go">    f&#39;2.</span>
<span class="go">    \time 19/16</span>
<span class="go">    &lt;e&#39; g&#39;&gt;8</span>
<span class="go">    r4</span>
<span class="go">    f&#39;2.</span>
<span class="go">    &lt;e&#39; g&#39;&gt;16</span>
<span class="go">    \time 17/16</span>
<span class="go">    r4</span>
<span class="go">    f&#39;2.</span>
<span class="go">    &lt;e&#39; g&#39;&gt;16</span>
<span class="go">    \time 13/16</span>
<span class="go">    f&#39;2.</span>
<span class="go">    &lt;e&#39; g&#39;&gt;16</span>
<span class="go">    ~</span>
<span class="go">    \time 1/16</span>
<span class="go">    &lt;e&#39; g&#39;&gt;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-11.png" src="../_images/image-LeafLooper-11.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>To run through just part of the process and output it as a single
container, starting from the initial head position, use the method
<code class="docutils literal notranslate"><span class="pre">output_n()</span></code> and pass the number of iterations as argument. Similarly
to <code class="docutils literal notranslate"><span class="pre">output_all()</span></code>, the keyword argument <code class="docutils literal notranslate"><span class="pre">tie_identical_pitches</span></code> is
available for tying pitches.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">window</span> <span class="o">=</span> <span class="n">looper</span><span class="o">.</span><span class="n">output_n</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    \time 2/4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-12.png" src="../_images/image-LeafLooper-12.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>To change the size of the looping window after instantiation, use the
property <code class="docutils literal notranslate"><span class="pre">window_size</span></code>. In the example below, the initial window is
of size 3, and so the first call of the looper object outputs the
first, second, and third leaves. The window size is then set to 4, and
the looper is called again, moving to the leaf in the next position,
thus outputting the second, third, fourth, and fifth leaves.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 e&#39;4 f&#39;2 ~ f&#39;8 g&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-13.png" src="../_images/image-LeafLooper-13.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">window_size</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 19/8</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;2</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-14.png" src="../_images/image-LeafLooper-14.png" />
</div>
</dd>
<dt>Example:</dt><dd><p>Use the <code class="docutils literal notranslate"><span class="pre">contents</span></code> property to read as well as overwrite the contents
of the looper. Notice that the <code class="docutils literal notranslate"><span class="pre">head_position</span></code> will remain on its
previous value and must be reset to <code class="docutils literal notranslate"><span class="pre">0</span></code> if that’s required.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                            <span class="n">window_size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                            <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-15.png" src="../_images/image-LeafLooper-15.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-16.png" src="../_images/image-LeafLooper-16.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">contents</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;cs&#39;&#39;&#39;4 ds&#39;&#39;&#39;4 es&#39;&#39;&#39;4 fs&#39;&#39;&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    ds&#39;&#39;&#39;4</span>
<span class="go">    es&#39;&#39;&#39;4</span>
<span class="go">    fs&#39;&#39;&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-17.png" src="../_images/image-LeafLooper-17.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span><span class="o">.</span><span class="n">head_position</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">notes</span> <span class="o">=</span> <span class="n">looper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    cs&#39;&#39;&#39;4</span>
<span class="go">    ds&#39;&#39;&#39;4</span>
<span class="go">    es&#39;&#39;&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-18.png" src="../_images/image-LeafLooper-18.png" />
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This class can handle tuplets, but the engraving of the output is not
ideal and so this functionality should be considered experimental. Time
signatures will be correct when dealing with partial tuplets (thus
having non-standard values in their denominators), but each individual
note of a tuplet will have the ratio printed above them and there won’t
be a bracket spanning all notes.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;8 \times 2/3 {a4 g2}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">looper</span> <span class="o">=</span> <span class="n">auxjad</span><span class="o">.</span><span class="n">LeafLooper</span><span class="p">(</span><span class="n">container</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">window_size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">window</span> <span class="o">=</span> <span class="n">looper</span><span class="o">.</span><span class="n">output_all</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">    #(ly:expect-warning &quot;strange time signature found&quot;)</span>
<span class="go">    \time 7/24</span>
<span class="go">    d&#39;8</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        a4</span>
<span class="go">    }</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        \time 2/4</span>
<span class="go">        a4</span>
<span class="go">    }</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g2</span>
<span class="go">    }</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        #(ly:expect-warning &quot;strange time signature found&quot;)</span>
<span class="go">        \time 2/6</span>
<span class="go">        g2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/image-LeafLooper-19.png" src="../_images/image-LeafLooper-19.png" />
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The functions <code class="docutils literal notranslate"><span class="pre">auxjad.remove_repeated_dynamics()</span></code> and
<code class="docutils literal notranslate"><span class="pre">auxjad.reposition_clefs()</span></code> can be used to clean the output and
remove repeated dynamics and unnecessary clef changes.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do note that elements that span multiple notes (such as hairpins,
ottava indicators, manual beams, etc.) can become problematic when
notes containing them are split into two. As a rule of thumb, it is
always better to attach those to the music after the looping process
has ended.</p>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code>(contents, *, window_size[, …])</p></td>
<td><p>Initialises self.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">output_all</span></code>(*[, tie_identical_pitches])</p></td>
<td><p>Goes through the whole looping process and outputs a single <code class="docutils literal notranslate"><span class="pre">abjad.Selection</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">output_n</span></code>(n, *[, tie_identical_pitches])</p></td>
<td><p>Goes through <code class="docutils literal notranslate"><span class="pre">n</span></code> iterations of the looping process and outputs a single <code class="docutils literal notranslate"><span class="pre">abjad.Selection</span></code>.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">contents</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">abjad.Container</span></code> to be sliced and looped.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">current_window</span></code></p></td>
<td><p>Read-only property, returns the window at the current head position.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">forward_bias</span></code></p></td>
<td><p>The chance of the window moving forward instead of backwards.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">head_position</span></code></p></td>
<td><p>The position of the head at the start of a looping window.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">max_steps</span></code></p></td>
<td><p>The maximum number of steps per operation.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">omit_time_signatures</span></code></p></td>
<td><p>When <code class="docutils literal notranslate"><span class="pre">True</span></code>, the output will contain no time signatures.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">processs_on_first_call</span></code></p></td>
<td><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> then the <code class="docutils literal notranslate"><span class="pre">contents</span></code> will be processed in the very first call.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">repetition_chance</span></code></p></td>
<td><p>The chance of the head not moving, thus repeating the output.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">step_size</span></code></p></td>
<td><p>The size of each step when moving the head.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">window_size</span></code></p></td>
<td><p>The length of the looping window.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="auxjad.leaves_are_tieable.html" class="btn btn-neutral float-right" title="auxjad.leaves_are_tieable" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="auxjad.LeafDynMaker.html" class="btn btn-neutral float-left" title="auxjad.LeafDynMaker" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Gilberto Agostinho

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>