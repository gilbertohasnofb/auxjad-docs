

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mutation &mdash; auxjad 0.8.22 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="mutate" href="auxjad.mutate.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> auxjad
          

          
          </a>

          
            
            
              <div class="version">
                0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to Auxjad’s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples of usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../score_gallery/index.html">Score gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api/index.html">Auxjad API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api/api-core.html">core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/api-indicators.html">indicators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/api-score.html">score</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/api-spanners.html">spanners</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api/api-utilities.html">utilities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="auxjad.inspect.html">inspect</a></li>
<li class="toctree-l3"><a class="reference internal" href="auxjad.Inspection.html">Inspection</a></li>
<li class="toctree-l3"><a class="reference internal" href="auxjad.mutate.html">mutate</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Mutation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">auxjad</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../api/index.html">Auxjad API</a> &raquo;</li>
        
          <li><a href="../api/api-utilities.html">utilities</a> &raquo;</li>
        
      <li>Mutation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/_api_members/auxjad.Mutation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mutation">
<h1>Mutation<a class="headerlink" href="#mutation" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt id="auxjad.Mutation">
<em class="property">class </em><code class="sig-prename descclassname">auxjad.</code><code class="sig-name descname">Mutation</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>abjad.core.Component.Component<span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.9)">collections.abc.Iterable</a><span class="p">[</span>abjad.core.Component.Component<span class="p">]</span><span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#auxjad.Mutation" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutation class containing all of Auxjad’s mutation methods.</p>
<p>Example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="s2">&quot;c&#39;4 e&#39;4 d&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
<span class="go">Mutation(client=Selection([Note(&quot;d&#39;4&quot;), Note(&quot;f&#39;4&quot;)]))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds all methods of <a class="reference internal" href="#auxjad.Mutation" title="auxjad.Mutation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Mutation</span></code></a> as
extension methods to <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore they can be used from
either <a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>, as shown below:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4\p d&#39;4\p e&#39;4 f&#39;4\ff&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff1</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4\p d&#39;4\p e&#39;4 f&#39;4\ff&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff2</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">inspect</span><span class="p">([</span><span class="n">staff1</span><span class="p">[:],</span> <span class="n">staff2</span><span class="p">[:]])</span><span class="o">.</span><span class="n">selections_are_identical</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.__init__" title="auxjad.Mutation.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>([client])</p></td>
<td><p>Initialises self.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.__repr__" title="auxjad.Mutation.__repr__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__repr__</span></code></a>()</p></td>
<td><p>Gets interpreter representation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.auto_rewrite_meter" title="auxjad.Mutation.auto_rewrite_meter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">auto_rewrite_meter</span></code></a>([meter_list, …])</p></td>
<td><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class) in place and has no return value; this function takes every measure of a container, detects its time signature, and apply both <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> and <a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a> to it.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.close_container" title="auxjad.Mutation.close_container"><code class="xref py py-obj docutils literal notranslate"><span class="pre">close_container</span></code></a>()</p></td>
<td><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class) in place and has no return value; this function changes the time signature of the last measure of an underfull in order to make it full.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.double_barlines_before_time_signatures" title="auxjad.Mutation.double_barlines_before_time_signatures"><code class="xref py py-obj docutils literal notranslate"><span class="pre">double_barlines_before_time_signatures</span></code></a>(*[, …])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function adds double bar lines before all time signatures.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.enforce_time_signature" title="auxjad.Mutation.enforce_time_signature"><code class="xref py py-obj docutils literal notranslate"><span class="pre">enforce_time_signature</span></code></a>(time_signatures, *[, …])</p></td>
<td><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class) in place and has no return value; this function applies a time signature (or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of time signatures) to the input container.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.extract_trivial_tuplets" title="auxjad.Mutation.extract_trivial_tuplets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extract_trivial_tuplets</span></code></a>()</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function looks for tuplets filled with rests or with tied notes or chords and replaces them with a single leaf.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.fill_with_rests" title="auxjad.Mutation.fill_with_rests"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fill_with_rests</span></code></a>(*[, disable_rewrite_meter, …])</p></td>
<td><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class) in place and has no return value; this function fills a container with rests in order to make it full.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.merge_partial_tuplets" title="auxjad.Mutation.merge_partial_tuplets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">merge_partial_tuplets</span></code></a>(*[, merge_across_barlines])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function merges all consecutive partial tuplets with the same ratio and which sum up to an assignable duration.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">prettify_rewrite_meter</span></code></a>(meter, *[, …])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function fuses pitched leaves according to the rules shown below, improving the default output of <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.remove_repeated_dynamics" title="auxjad.Mutation.remove_repeated_dynamics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove_repeated_dynamics</span></code></a>(*[, …])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function removes all consecutive repeated dynamic markings.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.remove_repeated_time_signatures" title="auxjad.Mutation.remove_repeated_time_signatures"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove_repeated_time_signatures</span></code></a>()</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function removes all consecutive repeated time signatures.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.reposition_clefs" title="auxjad.Mutation.reposition_clefs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reposition_clefs</span></code></a>(*[, shift_clef_to_notes, …])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function removes all consecutive repeated clefs.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.reposition_dynamics" title="auxjad.Mutation.reposition_dynamics"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reposition_dynamics</span></code></a>(*[, …])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function shifts all dynamics from rests to the next pitched leaves.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.reposition_slurs" title="auxjad.Mutation.reposition_slurs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reposition_slurs</span></code></a>(*[, …])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function repositions all slurs that starts or ends on rests.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.respell_accidentals" title="auxjad.Mutation.respell_accidentals"><code class="xref py py-obj docutils literal notranslate"><span class="pre">respell_accidentals</span></code></a>(*[, include_multiples, …])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function changes the accidentals of individual pitches of all chords in a container in order to avoid augmented unisons.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.rests_to_multimeasure_rest" title="auxjad.Mutation.rests_to_multimeasure_rest"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rests_to_multimeasure_rest</span></code></a>(*[, ignore_clefs])</p></td>
<td><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value; this function looks for measures filled with regular rests and converts them into an <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.MultimeasureRest</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#auxjad.Mutation.sustain_notes" title="auxjad.Mutation.sustain_notes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sustain_notes</span></code></a>(*[, …])</p></td>
<td><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class) in place and has no return value; this function will sustain all pitched leaves until the next pitched leaf, thus replacing all rests in between them.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.sync_containers" title="auxjad.Mutation.sync_containers"><code class="xref py py-obj docutils literal notranslate"><span class="pre">sync_containers</span></code></a>(*[, use_multimeasure_rests, …])</p></td>
<td><p>Mutates two or more input containers in place and has no return value; this function finds the longest container among the inputs and adds rests to all the shorter ones, making them the same length.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#auxjad.Mutation.client" title="auxjad.Mutation.client"><code class="xref py py-obj docutils literal notranslate"><span class="pre">client</span></code></a></p></td>
<td><p>Gets client.</p></td>
</tr>
</tbody>
</table>
<dl class="py method">
<dt id="auxjad.Mutation.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">client</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span>Union<span class="p">[</span>abjad.core.Component.Component<span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.9)">collections.abc.Iterable</a><span class="p">[</span>abjad.core.Component.Component<span class="p">]</span><span class="p">]</span><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialises self.</p>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.__repr__">
<code class="sig-name descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><a class="headerlink" href="#auxjad.Mutation.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets interpreter representation.</p>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.auto_rewrite_meter">
<code class="sig-name descname">auto_rewrite_meter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">meter_list</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">prettify_rewrite_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">extract_trivial_tuplets</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_across_groups_of_beats</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_quadruple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_triple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">boundary_depth</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maximum_dot_count</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rewrite_tuplets</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">merge_partial_tuplets</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">split_quadruple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.auto_rewrite_meter" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class)
in place and has no return value; this function takes every measure of a
container, detects its time signature, and apply both
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> and
<a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a> to it.</p>
<dl>
<dt>Basic usage:</dt><dd><p>For this example, the following container will be mutated:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;8 e&#39;16 f&#39;8 g&#39;4 a&#39;4 b&#39;8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;4. e&#39;16 f&#39;8 g&#39;4 a&#39;16 b&#39;16&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;4.</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;16</span>
<span class="go">    b&#39;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-xyx2wh7ufer.png" src="../_images/auto_rewrite_meter-xyx2wh7ufer.png" />
</div>
<p>Abjad’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> mutates an <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code>
of a measure, improving its notation.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;16</span>
<span class="go">    ~</span>
<span class="go">    d&#39;16</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8.</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8.</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;16</span>
<span class="go">    b&#39;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-7fn2uj2xupb.png" src="../_images/auto_rewrite_meter-7fn2uj2xupb.png" />
</div>
<p>This function mutates an <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> (or child class),
identifying the implied meters of each measure and applying both
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> and
<a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a> to it. See the documentation
of the latter for a detailed explanation of what it does.</p>
<p>Applying <a class="reference internal" href="#auxjad.Mutation.auto_rewrite_meter" title="auxjad.Mutation.auto_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().auto_rewrite_meter()</span></code></a> to the same initial
container shown in the first figure above outputs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;8 e&#39;16 f&#39;8 g&#39;4 a&#39;4 b&#39;8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;4. e&#39;16 f&#39;8 g&#39;4 a&#39;16 b&#39;16&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8.</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8.</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;16</span>
<span class="go">    b&#39;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-ahdaggaiqbc.png" src="../_images/auto_rewrite_meter-ahdaggaiqbc.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Time signature changes:</dt><dd><p>It automatically handles time signature changes.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;8 e&#39;16 f&#39;8 g&#39;4 a&#39;4 b&#39;8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 6/8 b&#39;4 c&#39;&#39;4 r4 &quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;8</span>
<span class="go">    \time 6/8</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    ~</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-08sckfp19vil.png" src="../_images/auto_rewrite_meter-08sckfp19vil.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">prettify_rewrite_meter</span></code>:</dt><dd><p>By default, this function invokes both <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>
and <a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;8 e&#39;16 f&#39;8 g&#39;4 a&#39;4 b&#39;8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;8 e&#39;16 f&#39;8 g&#39;4 a&#39;4 b&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-vbytyszlkng.png" src="../_images/auto_rewrite_meter-vbytyszlkng.png" />
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">prettify_rewrite_meter</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> to not invoke
<a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;8 e&#39;16 f&#39;8 g&#39;4 a&#39;4 b&#39;8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;c&#39;16 d&#39;4. e&#39;16 f&#39;8 g&#39;4 a&#39;16 b&#39;16&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">prettify_rewrite_meter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;16</span>
<span class="go">    ~</span>
<span class="go">    d&#39;16</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8.</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8.</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;16</span>
<span class="go">    b&#39;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-64wse58hvko.png" src="../_images/auto_rewrite_meter-64wse58hvko.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">meter_list</span></code>:</dt><dd><p>When no <code class="docutils literal notranslate"><span class="pre">meter_list</span></code> is supplied, this function detects the time
signature of each measure and uses those when rewritting it:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 7/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4 b&#39;4 c&#39;&#39;8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 5/4 d&#39;&#39;8 e&#39;&#39;4 f&#39;&#39;4 g&#39;&#39;4 a&#39;&#39;4 b&#39;&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 7/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    \time 5/4</span>
<span class="go">    d&#39;&#39;8</span>
<span class="go">    e&#39;&#39;4</span>
<span class="go">    f&#39;&#39;4</span>
<span class="go">    g&#39;&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;&#39;8</span>
<span class="go">    a&#39;&#39;4</span>
<span class="go">    b&#39;&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-l4xnpevp3z.png" src="../_images/auto_rewrite_meter-l4xnpevp3z.png" />
</div>
<p>To use a custom list of meters (one for each measure), set
<code class="docutils literal notranslate"><span class="pre">meter_list</span></code> to a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of <a class="reference external" href="https://abjad.github.io/api/abjad/meter.html#abjad.meter.Meter" title="(in Abjad v3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Meter</span></code></a>’s or
<a class="reference external" href="https://abjad.github.io/api/abjad/indicators/TimeSignature.html#abjad.indicators.TimeSignature.TimeSignature" title="(in Abjad v3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.TimeSignature</span></code></a>’s.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 7/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4 b&#39;4 c&#39;&#39;8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 5/4 d&#39;&#39;8 e&#39;&#39;4 f&#39;&#39;4 g&#39;&#39;4 a&#39;&#39;4 b&#39;&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">increase_monotonic</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>              <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">increase_monotonic</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
<span class="gp">... </span>              <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">(</span><span class="n">meter_list</span><span class="o">=</span><span class="n">meter_list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 7/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    \time 5/4</span>
<span class="go">    d&#39;&#39;8</span>
<span class="go">    e&#39;&#39;4</span>
<span class="go">    f&#39;&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;&#39;8</span>
<span class="go">    g&#39;&#39;4</span>
<span class="go">    a&#39;&#39;4</span>
<span class="go">    b&#39;&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-uqif4i8tqxk.png" src="../_images/auto_rewrite_meter-uqif4i8tqxk.png" />
</div>
</dd>
<dt>Number of measures:</dt><dd><p>This function handles a container with any number of measures and any
number of time signature changes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;8 d&#39;4 e&#39;4 f&#39;8 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 5/8 g&#39;4 a&#39;4 r8 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 6/8 b&#39;4 c&#39;&#39;4 r4 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 4/4 d&#39;&#39;8 e&#39;&#39;4 f&#39;&#39;8 g&#39;&#39;16 a&#39;&#39;4 r8.&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;8</span>
<span class="go">    \time 5/8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    r8</span>
<span class="go">    \time 6/8</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    ~</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    r4</span>
<span class="go">    \time 4/4</span>
<span class="go">    d&#39;&#39;8</span>
<span class="go">    e&#39;&#39;4</span>
<span class="go">    f&#39;&#39;8</span>
<span class="go">    g&#39;&#39;16</span>
<span class="go">    a&#39;&#39;8.</span>
<span class="go">    ~</span>
<span class="go">    a&#39;&#39;16</span>
<span class="go">    r8.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-hkhtqnqita.png" src="../_images/auto_rewrite_meter-hkhtqnqita.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extract_trivial_tuplets</span></code>:</dt><dd><p>By default, tuplets filled with rests or tied notes or chords are
extracted:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;4 ~ c&#39;8} \times 2/3 {d&#39;8 r4} &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {r8 r8 r8} \times 2/3 {&lt;e&#39; g&#39;&gt;8 ~ &lt;e&#39; g&#39;&gt;4}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        d&#39;8</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    r4</span>
<span class="go">    &lt;e&#39; g&#39;&gt;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-nq6t6qwka7a.png" src="../_images/auto_rewrite_meter-nq6t6qwka7a.png" />
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">extract_trivial_tuplets</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;4 ~ c&#39;8} \times 2/3 {d&#39;8 r4} &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {r8 r8 r8} \times 2/3 {&lt;e&#39; g&#39;&gt;8 ~ &lt;e&#39; g&#39;&gt;4}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">extract_trivial_tuplets</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;4.</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        d&#39;8</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r4.</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        &lt;e&#39; g&#39;&gt;4.</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-ssnsui7o9cc.png" src="../_images/auto_rewrite_meter-ssnsui7o9cc.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">merge_partial_tuplets</span></code>:</dt><dd><p>By default, consecutive partial tuplets with the same ratio that sum up
to an assignable duration will be merged together:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;2 d&#39;1}&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {e&#39;2} \times 2/3 {f&#39;1}&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;2</span>
<span class="go">        d&#39;1</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        e&#39;2</span>
<span class="go">        f&#39;1</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-ty72t5wvc1.png" src="../_images/auto_rewrite_meter-ty72t5wvc1.png" />
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">merge_partial_tuplets</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;2 d&#39;1}&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {e&#39;2} \times 2/3 {f&#39;1}&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">merge_partial_tuplets</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;2</span>
<span class="go">        d&#39;1</span>
<span class="go">    }</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        e&#39;2</span>
<span class="go">    }</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        f&#39;1</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-4rouf819bjb.png" src="../_images/auto_rewrite_meter-4rouf819bjb.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function also accepts the arguments <code class="docutils literal notranslate"><span class="pre">boundary_depth</span></code>,
<code class="docutils literal notranslate"><span class="pre">maximum_dot_count</span></code>, and <code class="docutils literal notranslate"><span class="pre">rewrite_tuplets</span></code>, which are passed on to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>, and <code class="docutils literal notranslate"><span class="pre">fuse_across_groups_of_beats</span></code>,
<code class="docutils literal notranslate"><span class="pre">fuse_quadruple_meter</span></code>, <code class="docutils literal notranslate"><span class="pre">fuse_triple_meter</span></code>, and
<code class="docutils literal notranslate"><span class="pre">split_quadruple_meter</span></code>, which are passed on to
<a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a>. <code class="docutils literal notranslate"><span class="pre">merge_partial_tuplets</span></code>
is used to invoke <code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().merge_partial_tuplets()</span></code> See the
documentation of these functions for more details on these arguments.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">boundary_depth</span></code> to a value equal to or larger than <code class="docutils literal notranslate"><span class="pre">1</span></code>
will automatically disable <code class="docutils literal notranslate"><span class="pre">fuse_across_groups_of_beats</span></code>,
<code class="docutils literal notranslate"><span class="pre">fuse_quadruple_meter</span></code>, and <code class="docutils literal notranslate"><span class="pre">fuse_triple_meter</span></code>, regardless of
their values. This is because when any of those arguments is <code class="docutils literal notranslate"><span class="pre">True</span></code>,
<a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a> will fuse across beats,
which goes against the purpose of using <code class="docutils literal notranslate"><span class="pre">boundary_depth</span></code>. Compare the
results below. In the first case, simply applying
<a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a> with no arguments results in
some logical ties being tied across beats.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;4. d&#39;4. e&#39;4 f&#39;8 g&#39;4 a&#39;4 b&#39;4.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">,</span> <span class="n">boundary_depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    ~</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">    ~</span>
<span class="go">    b&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-cf09ysj16fo.png" src="../_images/auto_rewrite_meter-cf09ysj16fo.png" />
</div>
<p>By automatically setting all <code class="docutils literal notranslate"><span class="pre">fuse_across_groups_of_beats</span></code>,
<code class="docutils literal notranslate"><span class="pre">fuse_quadruple_meter</span></code>, and  <code class="docutils literal notranslate"><span class="pre">fuse_triple_meter`</span> <span class="pre">to</span> <span class="pre">``False</span></code> when
<code class="docutils literal notranslate"><span class="pre">boundary_depth</span></code> is equal to or larger than <code class="docutils literal notranslate"><span class="pre">1</span></code>, this function will
not fuse those leaves against the required boundary depth.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;4. d&#39;4. e&#39;4 f&#39;8 g&#39;4 a&#39;4 b&#39;4.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">auto_rewrite_meter</span><span class="p">(</span><span class="n">boundary_depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    ~</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">    ~</span>
<span class="go">    b&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/auto_rewrite_meter-mm9xvmaqwfj.png" src="../_images/auto_rewrite_meter-mm9xvmaqwfj.png" />
</div>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.client">
<em class="property">property </em><code class="sig-name descname">client</code><a class="headerlink" href="#auxjad.Mutation.client" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets client. Returns selection or component.</p>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.close_container">
<code class="sig-name descname">close_container</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.close_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class)
in place and has no return value; this function changes the time signature
of the last measure of an underfull in order to make it full.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Returns the missing duration of the last measure of any container or
child class. If no time signature is encountered, it uses LilyPond’s
convention and considers the container as in 4/4.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container3</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 | c&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container4</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 | c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container3</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container4</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-nfnk06s90x.png" src="../_images/close_container-nfnk06s90x.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-swyxwiup8pm.png" src="../_images/close_container-swyxwiup8pm.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container3</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    \time 1/4</span>
<span class="go">    c&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-mms5hiysbwe.png" src="../_images/close_container-mms5hiysbwe.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container4</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-aky7avbla4w.png" src="../_images/close_container-aky7avbla4w.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">close_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">close_containers</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Time signature changes:</dt><dd><p>Handles any time signatures as well as changes of time signature.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;4 d&#39;4 e&#39;4 f&#39;4 g&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 a2. \time 2/4 c&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container3</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 5/4 g1 ~ g4 \time 4/4 af&#39;2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container3</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    \time 1/4</span>
<span class="go">    g&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-3tgyty245cq.png" src="../_images/close_container-3tgyty245cq.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    a2.</span>
<span class="go">    \time 1/4</span>
<span class="go">    c&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-st5d89zofoh.png" src="../_images/close_container-st5d89zofoh.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container3</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 5/4</span>
<span class="go">    g1</span>
<span class="go">    ~</span>
<span class="go">    g4</span>
<span class="go">    \time 2/4</span>
<span class="go">    af&#39;2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-wd5irlm76l.png" src="../_images/close_container-wd5irlm76l.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code>’s, all time signatures in the output will
be commented out with <code class="docutils literal notranslate"><span class="pre">%%%.</span></code> This is because Abjad only applies time
signatures to containers that belong to a <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>. The present
function works with either <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    %%% \time 3/4 %%%</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-xrwkorhtl5.png" src="../_images/close_container-xrwkorhtl5.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-ys6pcdlywy.png" src="../_images/close_container-ys6pcdlywy.png" />
</div>
</div>
<dl>
<dt>Partial time signatures:</dt><dd><p>Correctly handles partial time signatures.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 g&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">partial</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">container</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \partial 4</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    \time 1/4</span>
<span class="go">    g&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/close_container-rfskjbbfnu.png" src="../_images/close_container-rfskjbbfnu.png" />
</div>
</dd>
</dl>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>If a container is malformed, i.e. it has an underfilled measure before
a time signature change, the function raises a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>
exception.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 5/4 g&#39;&#39;1 \time 4/4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">)</span><span class="o">.</span><span class="n">close_container</span><span class="p">()</span>
<span class="go">ValueError: &#39;container&#39; is malformed, with an underfull measure</span>
<span class="go">preceding a time signature change</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input container must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.double_barlines_before_time_signatures">
<code class="sig-name descname">double_barlines_before_time_signatures</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">context</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)">str</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.double_barlines_before_time_signatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function adds double bar lines before all time signatures.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Whenever a new time signature appears, the function adds a double bar
line before it:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;2. \time 4/4 d&#39;1 e&#39;1 \time 6/4 f&#39;2. g&#39;2.&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">double_barlines_before_time_signatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    \bar &quot;||&quot;</span>
<span class="go">    \time 4/4</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \bar &quot;||&quot;</span>
<span class="go">    \time 6/4</span>
<span class="go">    f&#39;2.</span>
<span class="go">    g&#39;2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-2O7JyxN1CS.png" src="../_images/remove_repeated_time_signatures-2O7JyxN1CS.png" />
</div>
</dd>
<dt>Multi-measure rests:</dt><dd><p>This function can handle multi-measure rests too.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 3/4 R1 * 3/4 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 4/4 R1 * 2 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 6/4 R1 * 6/4 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 4/4 R1&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">double_barlines_before_time_signatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    R1 * 3/4</span>
<span class="go">    \bar &quot;||&quot;</span>
<span class="go">    \time 4/4</span>
<span class="go">    R1 * 2</span>
<span class="go">    \bar &quot;||&quot;</span>
<span class="go">    \time 6/4</span>
<span class="go">    R1 * 3/2</span>
<span class="go">    \bar &quot;||&quot;</span>
<span class="go">    \time 4/4</span>
<span class="go">    R1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-aYmnnFDdRh.png" src="../_images/remove_repeated_time_signatures-aYmnnFDdRh.png" />
</div>
</dd>
<dt>Input with bar lines:</dt><dd><p>If the input selection already contains bar lines at poinst where a
time signature change, the function will only replace those of type
<code class="docutils literal notranslate"><span class="pre">&quot;|&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>, keeping all others as they were.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;R1 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;2. &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 4/4 d&#39;1 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;e&#39;1 &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 6/4 f&#39;2. g&#39;2. &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 2/4 a&#39;2&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">BarLine</span><span class="p">(</span><span class="s1">&#39;.|:&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">BarLine</span><span class="p">(</span><span class="s1">&#39;:|.&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">BarLine</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">BarLine</span><span class="p">(</span><span class="s1">&#39;!&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">double_barlines_before_time_signatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    R1</span>
<span class="go">    \bar &quot;.|:&quot;</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    \bar &quot;:|.&quot;</span>
<span class="go">    \time 4/4</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \bar &quot;||&quot;</span>
<span class="go">    \time 6/4</span>
<span class="go">    f&#39;2.</span>
<span class="go">    g&#39;2.</span>
<span class="go">    \bar &quot;!&quot;</span>
<span class="go">    \time 2/4</span>
<span class="go">    a&#39;2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-jUymJWLdR7.png" src="../_images/remove_repeated_time_signatures-jUymJWLdR7.png" />
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Attempting to add barlines to multiple staves in an <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Score</span></code> at
the same point in the score will raise an exception:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">up</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1 d&#39;1 \time 6/4 e&#39;1.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">down</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 4/4 \clef bass c1 d1 \time 6/4 e1.&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">up</span><span class="p">,</span> <span class="n">down</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">up</span><span class="p">[:])</span><span class="o">.</span><span class="n">double_barlines_before_time_signatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">down</span><span class="p">[:])</span><span class="o">.</span><span class="n">double_barlines_before_time_signatures</span><span class="p">()</span>
<span class="go">abjad.exceptions.PersistentIndicatorError:</span>

<span class="go">Can not attach ...</span>

<span class="go">abjad.Wrapper(</span>
<span class="go">    context=&#39;Score&#39;,</span>
<span class="go">    indicator=abjad.BarLine(&#39;||&#39;, format_slot=&#39;after&#39;, ),</span>
<span class="go">    tag=abjad.Tag(),</span>
<span class="go">    )</span>

<span class="gp">... </span><span class="n">to</span> <span class="n">Note</span><span class="p">(</span><span class="s1">&#39;d1&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="kc">None</span> <span class="n">because</span> <span class="o">...</span>

<span class="go">abjad.Wrapper(</span>
<span class="go">    context=&#39;Score&#39;,</span>
<span class="go">    indicator=abjad.BarLine(&#39;||&#39;, format_slot=&#39;after&#39;, ),</span>
<span class="go">    tag=abjad.Tag(),</span>
<span class="go">    )</span>

<span class="gp">... </span><span class="ow">is</span> <span class="n">already</span> <span class="n">attached</span> <span class="n">to</span> <span class="n">Note</span><span class="p">(</span><span class="s2">&quot;d&#39;1&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="kc">None</span><span class="o">.</span>
</pre></div>
</div>
<p>This is because, by default, bar lines belong to the score scope. In
order to have bar lines on both staves (e.g. for easier part
extraction), invoke this mutation with the argument <code class="docutils literal notranslate"><span class="pre">context</span></code> set to
<code class="docutils literal notranslate"><span class="pre">'Staff'</span></code> so that the double bar lines become scoped to the staff
instead of the score:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">up</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1 d&#39;1 \time 6/4 e&#39;1.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">down</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 \clef bass c1 d1 \time 6/4 e1.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">up</span><span class="p">,</span> <span class="n">down</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">up</span><span class="p">[:])</span><span class="o">.</span><span class="n">double_barlines_before_time_signatures</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">context</span><span class="o">=</span><span class="s1">&#39;Staff&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">down</span><span class="p">[:])</span><span class="o">.</span><span class="n">double_barlines_before_time_signatures</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">context</span><span class="o">=</span><span class="s1">&#39;Staff&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="go">\new Score</span>
<span class="go">&lt;&lt;</span>
<span class="go">    \new Staff</span>
<span class="go">    {</span>
<span class="go">        \time 4/4</span>
<span class="go">        c&#39;1</span>
<span class="go">        d&#39;1</span>
<span class="go">        \bar &quot;||&quot;</span>
<span class="go">        \time 6/4</span>
<span class="go">        e&#39;1.</span>
<span class="go">    }</span>
<span class="go">    \new Staff</span>
<span class="go">    {</span>
<span class="go">        \time 4/4</span>
<span class="go">        \clef &quot;bass&quot;</span>
<span class="go">        c1</span>
<span class="go">        d1</span>
<span class="go">        \bar &quot;||&quot;</span>
<span class="go">        \time 6/4</span>
<span class="go">        e1.</span>
<span class="go">    }</span>
<span class="go">&gt;&gt;</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-yD6KL6xbrV.png" src="../_images/remove_repeated_time_signatures-yD6KL6xbrV.png" />
</div>
<p>In this case, both individual staves will also have the bar lines:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">up</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">    \bar &quot;||&quot;</span>
<span class="go">    \time 6/4</span>
<span class="go">    e&#39;1.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-Zs1hSq2uwY.png" src="../_images/remove_repeated_time_signatures-Zs1hSq2uwY.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">down</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    c1</span>
<span class="go">    d1</span>
<span class="go">    \bar &quot;||&quot;</span>
<span class="go">    \time 6/4</span>
<span class="go">    e1.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-QYOgyhLJ2f.png" src="../_images/remove_repeated_time_signatures-QYOgyhLJ2f.png" />
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.enforce_time_signature">
<code class="sig-name descname">enforce_time_signature</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time_signatures</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference external" href="https://abjad.github.io/api/abjad/indicators/TimeSignature.html#abjad.indicators.TimeSignature.TimeSignature" title="(in Abjad v3.2)">abjad.indicators.TimeSignature.TimeSignature</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)">tuple</a><span class="p">, </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)">list</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">cyclic</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">fill_with_rests</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">close_container</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">disable_rewrite_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">prettify_rewrite_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">boundary_depth</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maximum_dot_count</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rewrite_tuplets</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">extract_trivial_tuplets</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_across_groups_of_beats</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_quadruple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_triple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">split_quadruple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.enforce_time_signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class)
in place and has no return value; this function applies a time signature
(or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of time signatures) to the input container.</p>
<dl>
<dt>Basic usage:</dt><dd><p>The function mutates a container in place, applying a time signature
to it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-9bf9zmnm19k.png" src="../_images/enforce_time_signature-9bf9zmnm19k.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;2</span>
<span class="go">    ~</span>
<span class="go">    c&#39;2</span>
<span class="go">    d&#39;2</span>
<span class="go">    ~</span>
<span class="go">    d&#39;2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-kerf9uos62i.png" src="../_images/enforce_time_signature-kerf9uos62i.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
</div>
<dl>
<dt>Single value for second positional argument:</dt><dd><p>The second positional argument can take either <a class="reference external" href="https://abjad.github.io/api/abjad/indicators/TimeSignature.html#abjad.indicators.TimeSignature.TimeSignature" title="(in Abjad v3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.TimeSignature</span></code></a>
or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a> for a single time signature (for multiple time
signatures, use a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> as shown further below). By default,
rests will be appended to the end of the staff if necessary.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-218f65bsco3.png" src="../_images/enforce_time_signature-218f65bsco3.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    ~</span>
<span class="go">    d&#39;2</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-u4p457k6ib7.png" src="../_images/enforce_time_signature-u4p457k6ib7.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">close_container</span></code>:</dt><dd><p>Set the optional keyword argument <code class="docutils literal notranslate"><span class="pre">close_container</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> in
order to adjust the last measure’s time signature instead of filling it
with rests.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1 e&#39;1 f&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-tn1l53yimir.png" src="../_images/enforce_time_signature-tn1l53yimir.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">close_container</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    ~</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    ~</span>
<span class="go">    e&#39;2.</span>
<span class="go">    f&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    \time 1/4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-1uhp08fqlpl.png" src="../_images/enforce_time_signature-1uhp08fqlpl.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fill_with_rests</span></code>:</dt><dd><p>Alternatively, to leave the last measure as it is input (i.e. not
filling it with rests nor adjusting the time signature), set the
optional keyword argument <code class="docutils literal notranslate"><span class="pre">fill_with_rests</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> (default
value is <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1 e&#39;1 f&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-bit2y19hncr.png" src="../_images/enforce_time_signature-bit2y19hncr.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">fill_with_rests</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    ~</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    ~</span>
<span class="go">    e&#39;2.</span>
<span class="go">    f&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-xo7fpeqsoek.png" src="../_images/enforce_time_signature-xo7fpeqsoek.png" />
</div>
</dd>
<dt>Multiple values for second positional argument:</dt><dd><p>The second argument can also take a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of
<a class="reference external" href="https://abjad.github.io/api/abjad/indicators/TimeSignature.html#abjad.indicators.TimeSignature.TimeSignature" title="(in Abjad v3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.TimeSignature</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-rl1csjn9osl.png" src="../_images/enforce_time_signature-rl1csjn9osl.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span><span class="n">time_signatures</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    \time 5/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-tqqrqi34bu.png" src="../_images/enforce_time_signature-tqqrqi34bu.png" />
</div>
</dd>
<dt>Repeated time signatures:</dt><dd><p>Consecutive identical time signatures are omitted. Also note that time
signatures can also be represented as a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a>’s.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1 e&#39;1 f&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-vn9ngz2k6cd.png" src="../_images/enforce_time_signature-vn9ngz2k6cd.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time_signatures</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span><span class="n">time_signatures</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;2</span>
<span class="go">    ~</span>
<span class="go">    c&#39;2</span>
<span class="go">    \time 4/4</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-nj2c90o0pe.png" src="../_images/enforce_time_signature-nj2c90o0pe.png" />
</div>
<p>Alternatively, use <code class="docutils literal notranslate"><span class="pre">None</span></code> to indicate repeated time signatures:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1 e&#39;1 f&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-2og5ld8bkxe.png" src="../_images/enforce_time_signature-2og5ld8bkxe.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time_signatures</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                   <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                   <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">... </span>                   <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span><span class="n">time_signatures</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;2</span>
<span class="go">    ~</span>
<span class="go">    c&#39;2</span>
<span class="go">    d&#39;2</span>
<span class="go">    ~</span>
<span class="go">    \time 3/4</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    ~</span>
<span class="go">    e&#39;2.</span>
<span class="go">    \time 4/4</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-3s9h7p1k05x.png" src="../_images/enforce_time_signature-3s9h7p1k05x.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cyclic</span></code>:</dt><dd><p>To cycle through the <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of time signatures until the container
is exhausted, set the optional keyword argument <code class="docutils literal notranslate"><span class="pre">cyclic</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1 e&#39;1 f&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-vl1bwp21saq.png" src="../_images/enforce_time_signature-vl1bwp21saq.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">time_signatures</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4.</span>
<span class="go">    ~</span>
<span class="go">    \time 2/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4.</span>
<span class="go">    \time 2/8</span>
<span class="go">    d&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 3/8</span>
<span class="go">    d&#39;4.</span>
<span class="go">    ~</span>
<span class="go">    \time 2/8</span>
<span class="go">    d&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 3/8</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 2/8</span>
<span class="go">    e&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 3/8</span>
<span class="go">    e&#39;4.</span>
<span class="go">    ~</span>
<span class="go">    \time 2/8</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    \time 3/8</span>
<span class="go">    f&#39;4.</span>
<span class="go">    ~</span>
<span class="go">    \time 2/8</span>
<span class="go">    f&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 3/8</span>
<span class="go">    f&#39;4</span>
<span class="go">    r8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-9mq64erlth6.png" src="../_images/enforce_time_signature-9mq64erlth6.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disable_rewrite_meter</span></code>:</dt><dd><p>By default, this function applies the mutation
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> to its output.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 ~ c&#39;4 r8 d&#39;4. e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span><span class="n">time_signatures</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 5/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    c&#39;2</span>
<span class="go">    \time 3/4</span>
<span class="go">    r8</span>
<span class="go">    d&#39;4.</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-xsjbr0vnev9.png" src="../_images/enforce_time_signature-xsjbr0vnev9.png" />
</div>
<p>To disable this, set the keyword argument <code class="docutils literal notranslate"><span class="pre">disable_rewrite_meter</span></code> to
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 ~ c&#39;4 r8 d&#39;4. e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">time_signatures</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">disable_rewrite_meter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 5/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    ~</span>
<span class="go">    c&#39;4</span>
<span class="go">    \time 3/4</span>
<span class="go">    r8</span>
<span class="go">    d&#39;4.</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-ezjnpwjd3xu.png" src="../_images/enforce_time_signature-ezjnpwjd3xu.png" />
</div>
</dd>
<dt>Tuplets:</dt><dd><p>The function handles tuplets, even if they must be split.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;2 d&#39;2 e&#39;2} f&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;2</span>
<span class="go">        d&#39;2</span>
<span class="go">        e&#39;2</span>
<span class="go">    }</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-v4ndqpmqjk.png" src="../_images/enforce_time_signature-v4ndqpmqjk.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span><span class="n">time_signatures</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        \time 2/4</span>
<span class="go">        c&#39;2</span>
<span class="go">        d&#39;4</span>
<span class="go">        ~</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        \time 3/4</span>
<span class="go">        d&#39;4</span>
<span class="go">        e&#39;2</span>
<span class="go">    }</span>
<span class="go">    f&#39;4</span>
<span class="go">    ~</span>
<span class="go">    f&#39;2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-5jdoukq2rkd.png" src="../_images/enforce_time_signature-5jdoukq2rkd.png" />
</div>
</dd>
<dt>Time signatures in the input container:</dt><dd><p>Note that any time signatures in the input container will be ignored.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;2. d&#39;2. e&#39;2. f&#39;2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    d&#39;2.</span>
<span class="go">    e&#39;2.</span>
<span class="go">    f&#39;2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-bnnz1hov5bu.png" src="../_images/enforce_time_signature-bnnz1hov5bu.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time_signatures</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">time_signatures</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 5/8</span>
<span class="go">    c&#39;4.</span>
<span class="go">    ~</span>
<span class="go">    c&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 1/16</span>
<span class="go">    c&#39;16</span>
<span class="go">    ~</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;4..</span>
<span class="go">    ~</span>
<span class="go">    \time 5/8</span>
<span class="go">    d&#39;4</span>
<span class="go">    ~</span>
<span class="go">    d&#39;16</span>
<span class="go">    e&#39;16</span>
<span class="go">    ~</span>
<span class="go">    e&#39;4</span>
<span class="go">    ~</span>
<span class="go">    \time 1/16</span>
<span class="go">    e&#39;16</span>
<span class="go">    ~</span>
<span class="go">    \time 2/4</span>
<span class="go">    e&#39;4.</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    \time 5/8</span>
<span class="go">    f&#39;4.</span>
<span class="go">    ~</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-2l289r8sdzl.png" src="../_images/enforce_time_signature-2l289r8sdzl.png" />
</div>
</dd>
<dt>Tweaking <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>:</dt><dd><p>This function uses the default logical tie splitting algorithm from
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4. d&#39;8 e&#39;2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4.</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-bykbobzx47.png" src="../_images/enforce_time_signature-bykbobzx47.png" />
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">boundary_depth</span></code> to a different number to change its behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4. d&#39;8 e&#39;2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">enforce_time_signature</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">boundary_depth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    ~</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-wljhgmjh9c.png" src="../_images/enforce_time_signature-wljhgmjh9c.png" />
</div>
<p>Other arguments available for tweaking the output of
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> are <code class="docutils literal notranslate"><span class="pre">maximum_dot_count</span></code> and
<code class="docutils literal notranslate"><span class="pre">rewrite_tuplets</span></code>, which work exactly as the identically named
arguments of <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>.</p>
<p>This function also accepts the arguments
<code class="docutils literal notranslate"><span class="pre">fuse_across_groups_of_beats</span></code>, <code class="docutils literal notranslate"><span class="pre">fuse_quadruple_meter</span></code>,
<code class="docutils literal notranslate"><span class="pre">fuse_triple_meter</span></code>, <code class="docutils literal notranslate"><span class="pre">extract_trivial_tuplets</span></code>, and
<code class="docutils literal notranslate"><span class="pre">split_quadruple_meter</span></code>, which are passed on to
<a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a> (the latter can be disabled
by setting <code class="docutils literal notranslate"><span class="pre">prettify_rewrite_meter</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>). See the
documentation of this function for more details on these arguments.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code>’s, all time signatures in the output will
be commented out with <code class="docutils literal notranslate"><span class="pre">%%%.</span></code> This is because Abjad only applies time
signatures to containers that belong to a <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>. The present
function works with either <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    %%% \time 3/4 %%%</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-ntl3jgbi7j.png" src="../_images/enforce_time_signature-ntl3jgbi7j.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/enforce_time_signature-y5sjtx3j0v.png" src="../_images/enforce_time_signature-y5sjtx3j0v.png" />
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input container must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.extract_trivial_tuplets">
<code class="sig-name descname">extract_trivial_tuplets</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.extract_trivial_tuplets" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function looks for tuplets filled with rests or with tied notes or
chords and replaces them with a single leaf.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Usage is simple:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {r4 r2} \times 2/3 {c&#39;8 ~ c&#39;8 ~ c&#39;2}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r4</span>
<span class="go">        r2</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;8</span>
<span class="go">        ~</span>
<span class="go">        c&#39;8</span>
<span class="go">        ~</span>
<span class="go">        c&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-4htz2xebxwf.png" src="../_images/extract_trivial_tuplets-4htz2xebxwf.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">extract_trivial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    r2</span>
<span class="go">    c&#39;2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-2dbuwo4erhb.png" src="../_images/extract_trivial_tuplets-2dbuwo4erhb.png" />
</div>
<p>It also works with containers with tuplets within tuplets.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\times 4/5 {r2. \times 2/3 {r2 r4}}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        r2.</span>
<span class="go">        \times 2/3 {</span>
<span class="go">            r2</span>
<span class="go">            r4</span>
<span class="go">        }</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-8d5bcyxcmhc.png" src="../_images/extract_trivial_tuplets-8d5bcyxcmhc.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">extract_trivial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    r1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-2a2fvwimyrx.png" src="../_images/extract_trivial_tuplets-2a2fvwimyrx.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 4/5 {c&#39;2. ~ \times 2/3 {c&#39;2 ~ c&#39;4}}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        c&#39;2.</span>
<span class="go">        ~</span>
<span class="go">        \times 2/3 {</span>
<span class="go">            c&#39;2</span>
<span class="go">            ~</span>
<span class="go">            c&#39;4</span>
<span class="go">        }</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-xka6r5iyo4l.png" src="../_images/extract_trivial_tuplets-xka6r5iyo4l.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">extract_trivial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-f1qxi44xcsw.png" src="../_images/extract_trivial_tuplets-f1qxi44xcsw.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">extract_trivial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">extract_trivial_tuplets</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Partial extraction:</dt><dd><p>This function also extracts tuplets within tuplets.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;r2 \times 2/3 {r2 r4} \times 4/5 {c&#39;2. \times 2/3 {r2 r4}}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    r2</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r2</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        c&#39;2.</span>
<span class="go">        \times 2/3 {</span>
<span class="go">            r2</span>
<span class="go">            r4</span>
<span class="go">        }</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-adibnkb1mbs.png" src="../_images/extract_trivial_tuplets-adibnkb1mbs.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">extract_trivial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    r2</span>
<span class="go">    r2</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        c&#39;2.</span>
<span class="go">        r2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-xldohyedqs.png" src="../_images/extract_trivial_tuplets-xldohyedqs.png" />
</div>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use <a class="reference internal" href="#auxjad.Mutation.rests_to_multimeasure_rest" title="auxjad.Mutation.rests_to_multimeasure_rest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().rests_to_multimeasure_rest()</span></code></a> to replace measures
filled with rests by a single multi-measure rest. That function makes
use of <a class="reference internal" href="#auxjad.Mutation.extract_trivial_tuplets" title="auxjad.Mutation.extract_trivial_tuplets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().extract_trivial_tuplets()</span></code></a>, so it is not
necessary to flatten the empty tuplets beforehand.</p>
</div>
<dl>
<dt>Time signature changes:</dt><dd><p>Works with measures with any time signature.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 r2. \times 3/2 {r4 r4}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">extract_trivial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    r2.</span>
<span class="go">    r2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-sa1tqmvtkx.png" src="../_images/extract_trivial_tuplets-sa1tqmvtkx.png" />
</div>
</dd>
<dt>Non-assignable durations:</dt><dd><p>This function also extracts tuplets which sum up to a non-assignable
duration. In this case, it creates multiple leaves and substitutes them
for the original tuplet. Indicators are passed on to the first leaf of
the new leaves.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 6/4 c&#39;4\f \times 5/6 {g1.\p}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 6/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    \f</span>
<span class="go">    \tweak text #tuplet-number::calc-fraction-text</span>
<span class="go">    \times 5/6 {</span>
<span class="go">        g1.</span>
<span class="go">        \p</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-l4kp9g5v7m.png" src="../_images/extract_trivial_tuplets-l4kp9g5v7m.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">extract_trivial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 6/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    \f</span>
<span class="go">    g1</span>
<span class="go">    \p</span>
<span class="go">    ~</span>
<span class="go">    g4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-8r40ndemvpn.png" src="../_images/extract_trivial_tuplets-8r40ndemvpn.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code>’s, all time signatures in the output will
be commented out with <code class="docutils literal notranslate"><span class="pre">%%%.</span></code> This is because Abjad only applies time
signatures to containers that belong to a <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>. The present
function works with either <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    %%% \time 3/4 %%%</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-6wymsb7z1n4.png" src="../_images/extract_trivial_tuplets-6wymsb7z1n4.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/extract_trivial_tuplets-moavfyqtxza.png" src="../_images/extract_trivial_tuplets-moavfyqtxza.png" />
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.fill_with_rests">
<code class="sig-name descname">fill_with_rests</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">disable_rewrite_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">prettify_rewrite_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">boundary_depth</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">maximum_dot_count</span><span class="p">:</span> <span class="n">Optional<span class="p">[</span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)">int</a><span class="p">]</span></span> <span class="o">=</span> <span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rewrite_tuplets</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">extract_trivial_tuplets</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_across_groups_of_beats</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_quadruple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_triple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">split_quadruple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.fill_with_rests" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class)
in place and has no return value; this function fills a container with
rests in order to make it full.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Returns the missing duration of the last measure of any container or
child class. If no time signature is encountered, it uses LilyPond’s
convention and considers the container as in 4/4.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container3</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 | c&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container4</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 | c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container3</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container4</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-up297scg6t.png" src="../_images/fill_with_rests-up297scg6t.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-azrrw0z0buw.png" src="../_images/fill_with_rests-azrrw0z0buw.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container3</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    c&#39;4</span>
<span class="go">    r2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-jtyw5ikc0k.png" src="../_images/fill_with_rests-jtyw5ikc0k.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container4</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-xjkm2vzjfpr.png" src="../_images/fill_with_rests-xjkm2vzjfpr.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Time signature changes:</dt><dd><p>Handles any time signatures as well as changes of time signature.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;4 d&#39;4 e&#39;4 f&#39;4 g&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 a2. \time 2/4 c&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff3</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 5/4 g1 ~ g4 \time 4/4 af&#39;2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff1</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff2</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff3</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff1</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    r2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-7zydps2jsb.png" src="../_images/fill_with_rests-7zydps2jsb.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff2</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    a2.</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-1lphcrl5pnr.png" src="../_images/fill_with_rests-1lphcrl5pnr.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff3</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 5/4</span>
<span class="go">    g1</span>
<span class="go">    ~</span>
<span class="go">    g4</span>
<span class="go">    \time 4/4</span>
<span class="go">    af&#39;2</span>
<span class="go">    r2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-e00jvx986r.png" src="../_images/fill_with_rests-e00jvx986r.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code>’s, all time signatures in the output will
be commented out with <code class="docutils literal notranslate"><span class="pre">%%%.</span></code> This is because Abjad only applies time
signatures to containers that belong to a <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>. The present
function works with either <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    %%% \time 3/4 %%%</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-b0qflg50qfn.png" src="../_images/fill_with_rests-b0qflg50qfn.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-qtaswjiecg.png" src="../_images/fill_with_rests-qtaswjiecg.png" />
</div>
</div>
<dl>
<dt>Partial time signatures:</dt><dd><p>Correctly handles partial time signatures.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;4 e&#39;4 f&#39;4 g&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_signature</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">partial</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">time_signature</span><span class="p">,</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \partial 4</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    r2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-9smva9ajdi.png" src="../_images/fill_with_rests-9smva9ajdi.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disable_rewrite_meter</span></code>:</dt><dd><p>By default, this class applies the <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>
mutation to the last measure when rests are added.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;8 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    r4.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-n83nmnfh92c.png" src="../_images/fill_with_rests-n83nmnfh92c.png" />
</div>
<p>Call this function with the optional keyword argument
<code class="docutils literal notranslate"><span class="pre">disable_rewrite_meter</span></code> set to <code class="docutils literal notranslate"><span class="pre">True</span></code> in order to disable this
behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;8 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">,</span> <span class="n">disable_rewrite_meter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    r4.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/fill_with_rests-9rg2i4n1vhr.png" src="../_images/fill_with_rests-9rg2i4n1vhr.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function also accepts the arguments <code class="docutils literal notranslate"><span class="pre">boundary_depth</span></code>,
<code class="docutils literal notranslate"><span class="pre">maximum_dot_count</span></code>, and <code class="docutils literal notranslate"><span class="pre">rewrite_tuplets</span></code>, which are passed on to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>, and <code class="docutils literal notranslate"><span class="pre">fuse_across_groups_of_beats</span></code>,
<code class="docutils literal notranslate"><span class="pre">fuse_quadruple_meter</span></code>, <code class="docutils literal notranslate"><span class="pre">fuse_triple_meter</span></code>,
<code class="docutils literal notranslate"><span class="pre">extract_trivial_tuplets</span></code>,  and <code class="docutils literal notranslate"><span class="pre">split_quadruple_meter</span></code>, which are
passed on to <a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a> (the latter can
be disabled by setting <code class="docutils literal notranslate"><span class="pre">prettify_rewrite_meter</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>). See
the documentation of those functions for more details on these
arguments.</p>
</div>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>If a container is malformed, i.e. it has an underfilled measure before
a time signature change, the function raises a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a>
exception.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 5/4 g&#39;&#39;1 \time 4/4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">)</span><span class="o">.</span><span class="n">fill_with_rests</span><span class="p">()</span>
<span class="go">ValueError: &#39;container&#39; is malformed, with an underfull measure</span>
<span class="go">preceding a time signature change</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input container must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.merge_partial_tuplets">
<code class="sig-name descname">merge_partial_tuplets</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">merge_across_barlines</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.merge_partial_tuplets" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function merges all consecutive partial tuplets with the same ratio
and which sum up to an assignable duration. Partial tuplets can result from
algorithmic manipulations such as phasing or looping, which can slice
through a tuplet.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Usage is simple:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;1} \times 2/3 {d&#39;2}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;1</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        d&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-ilr68s15kqb.png" src="../_images/merge_partial_tuplets-ilr68s15kqb.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">merge_partial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;1</span>
<span class="go">        d&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-qe29etsedx.png" src="../_images/merge_partial_tuplets-qe29etsedx.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">merge_partial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">merge_partial_tuplets</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Multiple consecutive partial tuplets:</dt><dd><p>This function can also handle several consecutive partial tuplets:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;2} \times 2/3 {d&#39;2} \times 2/3 {e&#39;2}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;2</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        d&#39;2</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        e&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-9rh7vpu208j.png" src="../_images/merge_partial_tuplets-9rh7vpu208j.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">merge_partial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;2</span>
<span class="go">        d&#39;2</span>
<span class="go">        e&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-oy1imqisx2.png" src="../_images/merge_partial_tuplets-oy1imqisx2.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">merge_across_barlines</span></code>:</dt><dd><p>By default, partial tuplets are not merged across barlines.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;2. &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {d&#39;4} r4 \times 2/3 {e&#39;2} &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {f&#39;4} r4 \times 2/3 {g&#39;2}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">merge_partial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        d&#39;4</span>
<span class="go">    }</span>
<span class="go">    r4</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        e&#39;2</span>
<span class="go">    }</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        f&#39;4</span>
<span class="go">    }</span>
<span class="go">    r4</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-3rjib7pctml.png" src="../_images/merge_partial_tuplets-3rjib7pctml.png" />
</div>
<p>To change  this behaviour, set <code class="docutils literal notranslate"><span class="pre">merge_across_barlines</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;2. &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {d&#39;4} r4 \times 2/3 {e&#39;2} &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {f&#39;4} r4 \times 2/3 {g&#39;2}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">merge_partial_tuplets</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">merge_across_barlines</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        d&#39;4</span>
<span class="go">    }</span>
<span class="go">    r4</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        e&#39;2</span>
<span class="go">        f&#39;4</span>
<span class="go">    }</span>
<span class="go">    r4</span>
<span class="go">    \tweak edge-height #&#39;(0.7 . 0)</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-icud1ejcmzc.png" src="../_images/merge_partial_tuplets-icud1ejcmzc.png" />
</div>
</dd>
<dt>Tied partial tuplets:</dt><dd><p>Tied partial tuplets are also handled by this function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\times 2/3 </span><span class="si">{r4}</span><span class="s2"> \times 2/3 {c&#39;2} &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 4/5 {d&#39;2~} \times 4/5{d&#39;8}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;2</span>
<span class="go">    }</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        d&#39;2</span>
<span class="go">        ~</span>
<span class="go">    }</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        d&#39;8</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-st4zw38qfce.png" src="../_images/merge_partial_tuplets-st4zw38qfce.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">merge_partial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r4</span>
<span class="go">        c&#39;2</span>
<span class="go">    }</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        d&#39;2</span>
<span class="go">        ~</span>
<span class="go">        d&#39;8</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-1pky5fsh2nl.png" src="../_images/merge_partial_tuplets-1pky5fsh2nl.png" />
</div>
</dd>
<dt>Indicators:</dt><dd><p>Indicators stay the same in the merged tuplet.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;2\p\&lt; d&#39;2} \times 2/3 {e&#39;2\ff}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;2</span>
<span class="go">        \p</span>
<span class="go">        \&lt;</span>
<span class="go">        d&#39;2</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        e&#39;2</span>
<span class="go">        \ff</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-7cdtafl348h.png" src="../_images/merge_partial_tuplets-7cdtafl348h.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">merge_partial_tuplets</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;2</span>
<span class="go">        \p</span>
<span class="go">        \&lt;</span>
<span class="go">        d&#39;2</span>
<span class="go">        e&#39;2</span>
<span class="go">        \ff</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-j9rmdfbawce.png" src="../_images/merge_partial_tuplets-j9rmdfbawce.png" />
</div>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The method <a class="reference internal" href="#auxjad.Mutation.extract_trivial_tuplets" title="auxjad.Mutation.extract_trivial_tuplets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().extract_trivial_tuplets()</span></code></a> can be used
after merging partial tuplets to further clean the output. The method
<a class="reference internal" href="#auxjad.Mutation.auto_rewrite_meter" title="auxjad.Mutation.auto_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().auto_rewrite_meter()</span></code></a> can also be used for this
purpose, as it will not only rewrite the metric notation of a staff but
also apply both <code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().merge_partial_tuplets()</span></code> and
<a class="reference internal" href="#auxjad.Mutation.extract_trivial_tuplets" title="auxjad.Mutation.extract_trivial_tuplets"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().extract_trivial_tuplets()</span></code></a> to the output.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code>’s, all time signatures in the output will
be commented out with <code class="docutils literal notranslate"><span class="pre">%%%.</span></code> This is because Abjad only applies time
signatures to containers that belong to a <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>. The present
function works with either <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    %%% \time 3/4 %%%</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-945s36mfdn.png" src="../_images/merge_partial_tuplets-945s36mfdn.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/merge_partial_tuplets-3b4tyqrnttw.png" src="../_images/merge_partial_tuplets-3b4tyqrnttw.png" />
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.prettify_rewrite_meter">
<code class="sig-name descname">prettify_rewrite_meter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">meter</span><span class="p">:</span> <span class="n">Union<span class="p">[</span><a class="reference external" href="https://abjad.github.io/api/abjad/meter.html#abjad.meter.Meter" title="(in Abjad v3.2)">abjad.meter.Meter</a><span class="p">, </span><a class="reference external" href="https://abjad.github.io/api/abjad/indicators/TimeSignature.html#abjad.indicators.TimeSignature.TimeSignature" title="(in Abjad v3.2)">abjad.indicators.TimeSignature.TimeSignature</a><span class="p">]</span></span></em>, <em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">fuse_across_groups_of_beats</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_quadruple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">fuse_triple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">extract_trivial_tuplets</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">split_quadruple_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.prettify_rewrite_meter" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function fuses pitched leaves according to the rules shown below,
improving the default output of <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Meters whose denominators are a crotchet or longer get tied notes
within a beat after <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> when they are at
an offset <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">4</span></code>, so a rhythm such as  <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">4</span></code>
<code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">2</span></code> <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">4</span></code> becomes <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">4</span></code>
<code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">4</span></code> <code class="docutils literal notranslate"><span class="pre">~</span></code> <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">4</span></code> <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">4</span></code>. This
function looks for those specific cases and fuses them, generating an
output which is often more readable.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;16 d&#39;8 e&#39;16 f&#39;16 g&#39;16 a&#39;8 b&#39;8 c&#39;&#39;16 d&#39;&#39;16&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;16</span>
<span class="go">    ~</span>
<span class="go">    d&#39;16</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;16</span>
<span class="go">    g&#39;16</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;&#39;16</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-vlnd7l5fb7s.png" src="../_images/prettify_rewrite_meter-vlnd7l5fb7s.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;16</span>
<span class="go">    g&#39;16</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;&#39;16</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-e7vfnese0ut.png" src="../_images/prettify_rewrite_meter-e7vfnese0ut.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
</pre></div>
</div>
</div>
<dl>
<dt>Other examples:</dt><dd><p>The rhythm of the leaves just before and after the two leaves to be
fused can be different than <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">4</span></code>, as the function
searches for logical ties of specific length and offset, and its
surroundings do not matter.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;32 d&#39;32 e&#39;8 f&#39;16 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {g&#39;32 a&#39;32 b&#39;32} c&#39;&#39;8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;r16 r32. d&#39;&#39;64 e&#39;&#39;8 f&#39;&#39;32 g&#39;&#39;32&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;32</span>
<span class="go">    d&#39;32</span>
<span class="go">    e&#39;16</span>
<span class="go">    ~</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;16</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g&#39;32</span>
<span class="go">        a&#39;32</span>
<span class="go">        b&#39;32</span>
<span class="go">    }</span>
<span class="go">    c&#39;&#39;16</span>
<span class="go">    ~</span>
<span class="go">    c&#39;&#39;16</span>
<span class="go">    r16</span>
<span class="go">    r32.</span>
<span class="go">    d&#39;&#39;64</span>
<span class="go">    e&#39;&#39;16</span>
<span class="go">    ~</span>
<span class="go">    e&#39;&#39;16</span>
<span class="go">    f&#39;&#39;32</span>
<span class="go">    g&#39;&#39;32</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-kw09gse2zxj.png" src="../_images/prettify_rewrite_meter-kw09gse2zxj.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;32</span>
<span class="go">    d&#39;32</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;16</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g&#39;32</span>
<span class="go">        a&#39;32</span>
<span class="go">        b&#39;32</span>
<span class="go">    }</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    r16</span>
<span class="go">    r32.</span>
<span class="go">    d&#39;&#39;64</span>
<span class="go">    e&#39;&#39;8</span>
<span class="go">    f&#39;&#39;32</span>
<span class="go">    g&#39;&#39;32</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-u5gmtdippsa.png" src="../_images/prettify_rewrite_meter-u5gmtdippsa.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fuse_across_groups_of_beats</span></code>:</dt><dd><p>By default, this function also fuses rhythms of type
<code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">2</span></code> <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">2</span></code> <code class="docutils literal notranslate"><span class="pre">~</span></code> <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">2</span></code>
<code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">2</span></code>, becoming <code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">2</span></code> <code class="docutils literal notranslate"><span class="pre">denominator</span></code>
<code class="docutils literal notranslate"><span class="pre">denominator</span> <span class="pre">/</span> <span class="pre">2</span></code>. This is only applied when the meter’s structure
has a depth of 2, which is the case for meters with numerators equal to
or larger than <code class="docutils literal notranslate"><span class="pre">5</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 6/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4 b&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 6/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-tqi4p0u8qog.png" src="../_images/prettify_rewrite_meter-tqi4p0u8qog.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 6/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-riif1glyqpo.png" src="../_images/prettify_rewrite_meter-riif1glyqpo.png" />
</div>
<p>to disable this behaviour, set the optional keyword argument
<code class="docutils literal notranslate"><span class="pre">fuse_across_groups_of_beats</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 6/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4 b&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">meter</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">fuse_across_groups_of_beats</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 6/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-ki5xbiteij.png" src="../_images/prettify_rewrite_meter-ki5xbiteij.png" />
</div>
</dd>
<dt><a class="reference external" href="https://abjad.github.io/api/abjad/meter.html#abjad.meter.Meter" title="(in Abjad v3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Meter</span></code></a> with <code class="docutils literal notranslate"><span class="pre">increase_monotonic=True</span></code>:</dt><dd><p>The fused notes will respect the beat structures of such meters, even
when <code class="docutils literal notranslate"><span class="pre">increase_monotonic</span></code> is set to the non-default value <code class="docutils literal notranslate"><span class="pre">True</span></code>.
Compare the outputs below.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 7/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4 b&#39;4 c&#39;&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 7/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-bud0jhkvvl.png" src="../_images/prettify_rewrite_meter-bud0jhkvvl.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 7/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;4 a&#39;4 b&#39;4 c&#39;&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">7</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">increase_monotonic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 7/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-47y86pbwwv5.png" src="../_images/prettify_rewrite_meter-47y86pbwwv5.png" />
</div>
</dd>
<dt>Multiple measures at once:</dt><dd><p>This function can take handle multiple measures at once, as long as
they share the same meter.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 5/8 c&#39;16 d&#39;8 e&#39;8 f&#39;8 g&#39;8 a&#39;16 ~ &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;a&#39;16 b&#39;8 c&#39;&#39;8 d&#39;&#39;8 e&#39;&#39;8 f&#39;&#39;16&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 5/8</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;16</span>
<span class="go">    ~</span>
<span class="go">    d&#39;16</span>
<span class="go">    e&#39;16</span>
<span class="go">    ~</span>
<span class="go">    e&#39;16</span>
<span class="go">    f&#39;16</span>
<span class="go">    ~</span>
<span class="go">    f&#39;16</span>
<span class="go">    g&#39;16</span>
<span class="go">    ~</span>
<span class="go">    g&#39;16</span>
<span class="go">    a&#39;16</span>
<span class="go">    ~</span>
<span class="go">    a&#39;16</span>
<span class="go">    b&#39;16</span>
<span class="go">    ~</span>
<span class="go">    b&#39;16</span>
<span class="go">    c&#39;&#39;16</span>
<span class="go">    ~</span>
<span class="go">    c&#39;&#39;16</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    ~</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;16</span>
<span class="go">    ~</span>
<span class="go">    e&#39;&#39;16</span>
<span class="go">    f&#39;&#39;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-8jdzmvf9yl.png" src="../_images/prettify_rewrite_meter-8jdzmvf9yl.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 5/8</span>
<span class="go">    c&#39;16</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;16</span>
<span class="go">    ~</span>
<span class="go">    f&#39;16</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;16</span>
<span class="go">    ~</span>
<span class="go">    a&#39;16</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    ~</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;8</span>
<span class="go">    f&#39;&#39;16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-pcn8x9hr6bb.png" src="../_images/prettify_rewrite_meter-pcn8x9hr6bb.png" />
</div>
</dd>
<dt>Multiple measures:</dt><dd><p>Similarly to <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code>, this function accepts
selections of multiple measures:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;8 | &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;a&#39;8 b&#39;4 c&#39;&#39;8 d&#39;&#39;16 e&#39;&#39;4 f&#39;&#39;8.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">    ~</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;8.</span>
<span class="go">    ~</span>
<span class="go">    e&#39;&#39;16</span>
<span class="go">    f&#39;&#39;8.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-s8fg7a2k0tr.png" src="../_images/prettify_rewrite_meter-s8fg7a2k0tr.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;8.</span>
<span class="go">    ~</span>
<span class="go">    e&#39;&#39;16</span>
<span class="go">    f&#39;&#39;8.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-rgd7ok7fkq.png" src="../_images/prettify_rewrite_meter-rgd7ok7fkq.png" />
</div>
</dd>
<dt>Multiple measures with different meters:</dt><dd><p>If the measures have different meters, they can be passed on
individually using <a class="reference external" href="https://docs.python.org/3/library/functions.html#zip" title="(in Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">zip()</span></code></a> as shown below.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;8 d&#39;4 e&#39;4 f&#39;16 g&#39;16 | &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 4/4 a&#39;8 b&#39;4 c&#39;&#39;8 d&#39;&#39;16 e&#39;&#39;4 f&#39;&#39;8.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meters</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)),</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">meter</span><span class="p">,</span> <span class="n">measure</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">meters</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">(),</span>
<span class="gp">... </span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;16</span>
<span class="go">    g&#39;16</span>
<span class="go">    \time 4/4</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;8</span>
<span class="go">    ~</span>
<span class="go">    b&#39;8</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;8.</span>
<span class="go">    ~</span>
<span class="go">    e&#39;&#39;16</span>
<span class="go">    f&#39;&#39;8.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-o2izz0m7s9k.png" src="../_images/prettify_rewrite_meter-o2izz0m7s9k.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">meter</span><span class="p">,</span> <span class="n">measure</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">meters</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">(),</span>
<span class="gp">... </span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;16</span>
<span class="go">    g&#39;16</span>
<span class="go">    \time 4/4</span>
<span class="go">    a&#39;8</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;8.</span>
<span class="go">    ~</span>
<span class="go">    e&#39;&#39;16</span>
<span class="go">    f&#39;&#39;8.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-zh89kk66zon.png" src="../_images/prettify_rewrite_meter-zh89kk66zon.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fuse_quadruple_meter</span></code>:</dt><dd><p>This function also takes care of two special cases, namely quadruple
and triple meters. By default, it will fuse leaves in quadruple meters
across beats 1 and 2, and across beats 3 and 4 (as long as they fulfil
the other requirements of duration and offset).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-nap4bbf7mxe.png" src="../_images/prettify_rewrite_meter-nap4bbf7mxe.png" />
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">fuse_quadruple_meter</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;8 d&#39;4 e&#39;4 f&#39;4 g&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">meter</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">fuse_quadruple_meter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-juipg9nzna.png" src="../_images/prettify_rewrite_meter-juipg9nzna.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fuse_triple_meter</span></code>:</dt><dd><p>In the case of triple meters, it will fuse leaves across any beat as
long as the previously mentioned conditions of offset and duration are
met.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;8 d&#39;4 e&#39;4 f&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-4wg3grpb94p.png" src="../_images/prettify_rewrite_meter-4wg3grpb94p.png" />
</div>
<p>Similarly to the example before, set <code class="docutils literal notranslate"><span class="pre">fuse_triple_meter</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>
to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;8 d&#39;4 e&#39;4 f&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">meter</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">fuse_triple_meter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;8</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    ~</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-l16ostzscta.png" src="../_images/prettify_rewrite_meter-l16ostzscta.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extract_trivial_tuplets</span></code>:</dt><dd><p>By default, this function extracts the contents of tuples that consist
solely of rests, or solely of tied notes and chords.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;4 ~ c&#39;8} \times 2/3 {d&#39;8 r4} &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {r8 r8 r8} \times 2/3 {&lt;e&#39; g&#39;&gt;8 ~ &lt;e&#39; g&#39;&gt;4}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        d&#39;8</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    r4</span>
<span class="go">    &lt;e&#39; g&#39;&gt;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-a72jx4fc1xd.png" src="../_images/prettify_rewrite_meter-a72jx4fc1xd.png" />
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">extract_trivial_tuplets</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;4 ~ c&#39;8} \times 2/3 {d&#39;8 r4} &quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {r8 r8 r8} \times 2/3 {&lt;e&#39; g&#39;&gt;8 ~ &lt;e&#39; g&#39;&gt;4}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">meter</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">extract_trivial_tuplets</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;4.</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        d&#39;8</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r4.</span>
<span class="go">    }</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        &lt;e&#39; g&#39;&gt;4.</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-v9q0ka94qcd.png" src="../_images/prettify_rewrite_meter-v9q0ka94qcd.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">split_quadruple_meter</span></code></dt><dd><p>When applying <code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> to a selection with
quadruple meter and without using a deeper <code class="docutils literal notranslate"><span class="pre">boundary_depth</span></code> than the
default, the resulting notation will often have leaves crossing the
third beat of the measure, as shown below.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 r4&quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;e&#39;4. f&#39;2 g&#39;8&quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;a&#39;4. b&#39;4. c&#39;&#39;4&quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;d&#39;&#39;16 e&#39;&#39;8. f&#39;&#39;4. g&#39;&#39;4 a&#39;&#39;8&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    r4</span>
<span class="go">    e&#39;4.</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;4.</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4.</span>
<span class="go">    b&#39;4.</span>
<span class="go">    c&#39;&#39;4</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;8.</span>
<span class="go">    f&#39;&#39;4.</span>
<span class="go">    g&#39;&#39;8</span>
<span class="go">    ~</span>
<span class="go">    g&#39;&#39;8</span>
<span class="go">    a&#39;&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-1wvhrjife1i.png" src="../_images/prettify_rewrite_meter-1wvhrjife1i.png" />
</div>
<p>This function tests those leaves against a series of rules, splitting
them when the tests fails. In the case shown above, the first two bars
are very easy to read rhythmically, but the third and fourth are less
so. This is due to the dotted crotchet, which starts off a beat,
crossing the third beat of the measure. This function will split these
sort of leaves as shown below.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    r4</span>
<span class="go">    e&#39;4.</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;4.</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4.</span>
<span class="go">    b&#39;8</span>
<span class="go">    ~</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;4</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;8.</span>
<span class="go">    f&#39;&#39;4</span>
<span class="go">    ~</span>
<span class="go">    f&#39;&#39;8</span>
<span class="go">    g&#39;&#39;4</span>
<span class="go">    a&#39;&#39;8</span>
<span class="go">}</span>
<span class="go">.. figure:: ../_images/prettify_rewrite_meter-56dy04wjzg.png</span>
</pre></div>
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">split_quadruple_meter</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;2 r4&quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;e&#39;4. f&#39;2 g&#39;8&quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;a&#39;4. b&#39;4. c&#39;&#39;4&quot;</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;d&#39;&#39;16 e&#39;&#39;8. f&#39;&#39;4. g&#39;&#39;4 a&#39;&#39;8&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meter</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Meter</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">measure</span> <span class="ow">in</span> <span class="n">abjad</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">group_by_measure</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">measure</span><span class="p">)</span><span class="o">.</span><span class="n">rewrite_meter</span><span class="p">(</span><span class="n">meter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">prettify_rewrite_meter</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">meter</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">split_quadruple_meter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    r4</span>
<span class="go">    e&#39;4.</span>
<span class="go">    f&#39;8</span>
<span class="go">    ~</span>
<span class="go">    f&#39;4.</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4.</span>
<span class="go">    b&#39;4.</span>
<span class="go">    c&#39;&#39;4</span>
<span class="go">    d&#39;&#39;16</span>
<span class="go">    e&#39;&#39;8.</span>
<span class="go">    f&#39;&#39;4.</span>
<span class="go">    g&#39;&#39;4</span>
<span class="go">    a&#39;&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/prettify_rewrite_meter-ww1x0zsxlnd.png" src="../_images/prettify_rewrite_meter-ww1x0zsxlnd.png" />
</div>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Use <code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.auto_rewrite_meter()</span></code> to automatically apply
<code class="xref py py-meth docutils literal notranslate"><span class="pre">abjad.mutate().rewrite_meter()</span></code> and
<a class="reference internal" href="#auxjad.Mutation.prettify_rewrite_meter" title="auxjad.Mutation.prettify_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().prettify_rewrite_meter()</span></code></a> to a container with multiple
time signatures.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.remove_repeated_dynamics">
<code class="sig-name descname">remove_repeated_dynamics</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">ignore_hairpins</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">reset_after_rests</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.remove_repeated_dynamics" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function removes all consecutive repeated dynamic markings.</p>
<dl>
<dt>Basic usage:</dt><dd><p>When two consecutive leaves have identical dynamics, the second
one is removed:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/8 c&#39;4\pp d&#39;8\pp | c&#39;4\f d&#39;8\f&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    \pp</span>
<span class="go">    d&#39;8</span>
<span class="go">    \pp</span>
<span class="go">    c&#39;4</span>
<span class="go">    \f</span>
<span class="go">    d&#39;8</span>
<span class="go">    \f</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-anw32e9i0f.png" src="../_images/remove_repeated_dynamics-anw32e9i0f.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    \pp</span>
<span class="go">    d&#39;8</span>
<span class="go">    c&#39;4</span>
<span class="go">    \f</span>
<span class="go">    d&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-i5ylxkzv7md.png" src="../_images/remove_repeated_dynamics-i5ylxkzv7md.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Dynamic structure:</dt><dd><p>The function also removes dynamics that are separated by an arbitrary
number of leaves without dynamics:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/8 c&#39;4\p d&#39;8 | e&#39;4.\p | c&#39;4\p d&#39;8\f&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    \p</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;4.</span>
<span class="go">    \p</span>
<span class="go">    c&#39;4</span>
<span class="go">    \p</span>
<span class="go">    d&#39;8</span>
<span class="go">    \f</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-ha1x7s8d2fb.png" src="../_images/remove_repeated_dynamics-ha1x7s8d2fb.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    \p</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;4.</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">    \f</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-g157jbbojhv.png" src="../_images/remove_repeated_dynamics-g157jbbojhv.png" />
</div>
</dd>
<dt>Subcontainers:</dt><dd><p>The container from which the selection is made can also have
subcontainers:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s2">&quot;c&#39;2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="p">(</span><span class="s2">&quot;&lt;d&#39; f&#39;&gt;2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">abjad</span><span class="o">.</span><span class="n">Tuplet</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s2">&quot;g2 a2 b2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s1">&#39;ppp&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s1">&#39;ppp&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s1">&#39;ppp&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;2</span>
<span class="go">    \ppp</span>
<span class="go">    &lt;d&#39; f&#39;&gt;2</span>
<span class="go">    \ppp</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g2</span>
<span class="go">        \ppp</span>
<span class="go">        a2</span>
<span class="go">        b2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-4h9xze4780d.png" src="../_images/remove_repeated_dynamics-4h9xze4780d.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;2</span>
<span class="go">    \ppp</span>
<span class="go">    &lt;d&#39; f&#39;&gt;2</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g2</span>
<span class="go">        a2</span>
<span class="go">        b2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-7n9aaveoslu.png" src="../_images/remove_repeated_dynamics-7n9aaveoslu.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ignore_hairpins</span></code>:</dt><dd><p>By default, repeated dynamics with hairpins in between are not removed,
but consecutive ones will.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;2\p\&lt; d&#39;2\f\&gt; | c&#39;2\f d&#39;2\f | e&#39;1\p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    \&gt;</span>
<span class="go">    c&#39;1</span>
<span class="go">    \f</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    e&#39;1</span>
<span class="go">    \p</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-frmlobo3gis.png" src="../_images/remove_repeated_dynamics-frmlobo3gis.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    \&gt;</span>
<span class="go">    c&#39;1</span>
<span class="go">    \f</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \p</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-ov05k1imubj.png" src="../_images/remove_repeated_dynamics-ov05k1imubj.png" />
</div>
<p>To override the previous behaviour, set <code class="docutils literal notranslate"><span class="pre">ignore_hairpins=True</span></code> and
hairpins will be ignored.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;2\p\&lt; d&#39;2\f\&gt; | c&#39;2\f d&#39;2\f | e&#39;1\p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    \&gt;</span>
<span class="go">    c&#39;1</span>
<span class="go">    \f</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    e&#39;1</span>
<span class="go">    \p</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-2hdkt6cyca1.png" src="../_images/remove_repeated_dynamics-2hdkt6cyca1.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">ignore_hairpins</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    \&gt;</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \p</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-xkaipizr2jr.png" src="../_images/remove_repeated_dynamics-xkaipizr2jr.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reset_after_rests</span></code>:</dt><dd><p>By default, rests are treated just like any other leaf and thus notes
with an identical dynamic separated by an arbitrary number of rests
will be considered as repeated and the second dynamic will be removed.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4\pp r2. | c&#39;1\pp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    \pp</span>
<span class="go">    r2.</span>
<span class="go">    c&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-wtno2t8qroh.png" src="../_images/remove_repeated_dynamics-wtno2t8qroh.png" />
</div>
<p>To override the previous behaviour, set <code class="docutils literal notranslate"><span class="pre">reset_after_rests=True</span></code> and
dynamics will always be restated after a rest.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4\pp r2. | c&#39;1\pp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">reset_after_rests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    \pp</span>
<span class="go">    r2.</span>
<span class="go">    c&#39;1</span>
<span class="go">    \pp</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-3e6g7u0q1i1.png" src="../_images/remove_repeated_dynamics-3e6g7u0q1i1.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reset_after_rests</span></code> and non-<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a> values:</dt><dd><p>The argument <code class="docutils literal notranslate"><span class="pre">reset_after_rests</span></code> takes not only <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a> values
but also durations (<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Duration</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></a>,
etc.). This sets the maximum length of rests before which identical
dynamics are restated. If the total length of rests falls below that
value, then repeated dynamics are removed.</p>
<p>In the case below, a rest of <code class="docutils literal notranslate"><span class="pre">r2</span></code>. is shorter than a duration of
<code class="docutils literal notranslate"><span class="pre">(4,</span> <span class="pre">4)</span></code>, so the repeated dynamic is removed.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4\pp r2. | c&#39;1\pp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">reset_after_rests</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    \pp</span>
<span class="go">    r2.</span>
<span class="go">    c&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-b323xuesujc.png" src="../_images/remove_repeated_dynamics-b323xuesujc.png" />
</div>
<p>But setting the duration to <code class="docutils literal notranslate"><span class="pre">2/4</span></code> forces the dynamic to be restated.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4\pp r2. | c&#39;1\pp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">reset_after_rests</span><span class="o">=</span><span class="mi">2</span> <span class="o">/</span> <span class="mi">4</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    \pp</span>
<span class="go">    r2.</span>
<span class="go">    c&#39;1</span>
<span class="go">    \pp</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-64dppx3cp99.png" src="../_images/remove_repeated_dynamics-64dppx3cp99.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reset_after_rests</span></code>:</dt><dd><p>The function also handles measure rests with <code class="docutils literal notranslate"><span class="pre">reset_after_rests</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4\pp r2. | c&#39;4\pp r2. | R1 | c&#39;1\pp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">reset_after_rests</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    \pp</span>
<span class="go">    r2.</span>
<span class="go">    c&#39;4</span>
<span class="go">    r2.</span>
<span class="go">    R1</span>
<span class="go">    c&#39;1</span>
<span class="go">    \pp</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_dynamics-jt7akhtbsge.png" src="../_images/remove_repeated_dynamics-jt7akhtbsge.png" />
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.remove_repeated_time_signatures">
<code class="sig-name descname">remove_repeated_time_signatures</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.remove_repeated_time_signatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function removes all consecutive repeated time signatures.</p>
<dl>
<dt>Basic usage:</dt><dd><p>When two consecutive measures have identical time signatures, the
second one is removed:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;8 | c&#39;4 d&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-feZSi4Trsg.png" src="../_images/remove_repeated_time_signatures-feZSi4Trsg.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_time_signatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-ImmpJOWn5U.png" src="../_images/remove_repeated_time_signatures-ImmpJOWn5U.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_time_signatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_time_signatures</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Time signature structure:</dt><dd><p>The function also removes time signatures that are separated by an
arbitrary number of measures without one:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 d&#39;8 e&#39;4. c&#39;4 d&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">)),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;4.</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-ihs4kU1dMe.png" src="../_images/remove_repeated_time_signatures-ihs4kU1dMe.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_time_signatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/8</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;4.</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;8</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-Ans1RrG5ZW.png" src="../_images/remove_repeated_time_signatures-Ans1RrG5ZW.png" />
</div>
</dd>
<dt>Subcontainers:</dt><dd><p>The container from which the selection is made can also have
subcontainers, including cases in which the time signatures are
attached to leaves of subcontainers:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s2">&quot;c&#39;2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="p">(</span><span class="s2">&quot;&lt;d&#39; f&#39;&gt;2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">abjad</span><span class="o">.</span><span class="n">Tuplet</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s2">&quot;g2 a2 b2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/2</span>
<span class="go">    c&#39;2</span>
<span class="go">    &lt;d&#39; f&#39;&gt;2</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        \time 2/2</span>
<span class="go">        g2</span>
<span class="go">        a2</span>
<span class="go">        b2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-Nybwh816FT.png" src="../_images/remove_repeated_time_signatures-Nybwh816FT.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">remove_repeated_time_signatures</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 2/2</span>
<span class="go">    c&#39;2</span>
<span class="go">    &lt;d&#39; f&#39;&gt;2</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g2</span>
<span class="go">        a2</span>
<span class="go">        b2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/remove_repeated_time_signatures-PNCfPcnTtj.png" src="../_images/remove_repeated_time_signatures-PNCfPcnTtj.png" />
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.reposition_clefs">
<code class="sig-name descname">reposition_clefs</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">shift_clef_to_notes</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">implicit_clef</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://abjad.github.io/api/abjad/indicators/Clef.html#abjad.indicators.Clef.Clef" title="(in Abjad v3.2)">abjad.indicators.Clef.Clef</a></span> <span class="o">=</span> <span class="default_value">Clef('treble')</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.reposition_clefs" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function removes all consecutive repeated clefs. It can also be used
to shift clefs from rests to pitched leaves.</p>
<dl>
<dt>Basic usage:</dt><dd><p>When consecutive clefs are the same, the second one is removed:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 | d&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    c&#39;1</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-ve7c2iykuyb.png" src="../_images/reposition_clefs-ve7c2iykuyb.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-w6sbmg4iihr.png" src="../_images/reposition_clefs-w6sbmg4iihr.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>LilyPond’s fallback clef:</dt><dd><p>As seen above, LilyPond automatically omits repeated clefs unless the
first clef is omitted. In that case, it uses a treble clef as fallback,
although it won’t then remove a subsequent repeated treble clef:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 | d&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-ozr2sz3jugc.png" src="../_images/reposition_clefs-ozr2sz3jugc.png" />
</div>
<p>This function handles fallback clefs too:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-0620w7q00lsr.png" src="../_images/reposition_clefs-0620w7q00lsr.png" />
</div>
</dd>
<dt>Clef structure:</dt><dd><p>The function also removes clefs that are separated by an arbitrary
number of leaves without clefs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 | d&#39;2 e&#39;4 r4 | f&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    r4</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-1dwpu3agebe.png" src="../_images/reposition_clefs-1dwpu3agebe.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;4</span>
<span class="go">    r4</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-wjmmwbhtaq.png" src="../_images/reposition_clefs-wjmmwbhtaq.png" />
</div>
</dd>
<dt>Inputs with optimal clef structure:</dt><dd><p>The function will not alter the container if the clef changes are
already optimal.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 | a,2 bf,4 r4 | f&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;bass&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    a,2</span>
<span class="go">    bf,4</span>
<span class="go">    r4</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-ooacruvoibr.png" src="../_images/reposition_clefs-ooacruvoibr.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    a,2</span>
<span class="go">    bf,4</span>
<span class="go">    r4</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    f&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-8z0s96frl4x.png" src="../_images/reposition_clefs-8z0s96frl4x.png" />
</div>
</dd>
<dt>Multi-measure rests:</dt><dd><p>The function handles rests and multi-measure rests.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 | d&#39;2 r2 | R1 | e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    R1</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-wpuzqrszs7i.png" src="../_images/reposition_clefs-wpuzqrszs7i.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    R1</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-os7dqkh11vl.png" src="../_images/reposition_clefs-os7dqkh11vl.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shift_clef_to_notes</span></code>:</dt><dd><p>By default, clefs attached to rests are shifted to the first pitched
leaf.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 | d&#39;2 r2 | fs1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;bass&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;2</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    r2</span>
<span class="go">    fs1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-jft5tljn0ni.png" src="../_images/reposition_clefs-jft5tljn0ni.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    fs1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-pirrrq3p6di.png" src="../_images/reposition_clefs-pirrrq3p6di.png" />
</div>
<p>Set <code class="docutils literal notranslate"><span class="pre">shift_clef_to_notes</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 | d&#39;2 r2 | fs1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;bass&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">(</span><span class="n">shift_clef_to_notes</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;2</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    r2</span>
<span class="go">    fs1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-srrb69k33oe.png" src="../_images/reposition_clefs-srrb69k33oe.png" />
</div>
</dd>
<dt>Multiple multi-measure rests:</dt><dd><p>Clefs are shifted even if the container has multiple multi-measure
rests.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;2. | d&#39;4 r2 | R1 * 3/4 | e&#39;2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;bass&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    c&#39;2.</span>
<span class="go">    d&#39;4</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    r2</span>
<span class="go">    R1 * 3/4</span>
<span class="go">    e&#39;2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-1l1ws1tqqt5.png" src="../_images/reposition_clefs-1l1ws1tqqt5.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    c&#39;2.</span>
<span class="go">    d&#39;4</span>
<span class="go">    r2</span>
<span class="go">    R1 * 3/4</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    e&#39;2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-gmh7uqxjjrf.png" src="../_images/reposition_clefs-gmh7uqxjjrf.png" />
</div>
</dd>
<dt>Subcontainers:</dt><dd><p>The container from which the selection is made can also have
subcontainers, including cases in which the clefs are attached to
leaves of subcontainers:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">abjad</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s2">&quot;c&#39;2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="p">(</span><span class="s2">&quot;&lt;d&#39; f&#39;&gt;2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="n">abjad</span><span class="o">.</span><span class="n">Tuplet</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s2">&quot;g&#39;2 a&#39;2 b&#39;2&quot;</span><span class="p">),</span>
<span class="gp">... </span>                     <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;2</span>
<span class="go">    &lt;d&#39; f&#39;&gt;2</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g&#39;2</span>
<span class="go">        \clef &quot;treble&quot;</span>
<span class="go">        a&#39;2</span>
<span class="go">        b&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-vwygykrmjd.png" src="../_images/reposition_clefs-vwygykrmjd.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;2</span>
<span class="go">    &lt;d&#39; f&#39;&gt;2</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        g&#39;2</span>
<span class="go">        a&#39;2</span>
<span class="go">        b&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-9gaqlf92kc.png" src="../_images/reposition_clefs-9gaqlf92kc.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">implicit_clef</span></code>:</dt><dd><p>By default, when the first leaf doesn’t have a clef the function
assumes that the music is written in treble clef (which is the default
fallback clef in LilyPond).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 | d&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;treble&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-tuxicnsglgk.png" src="../_images/reposition_clefs-tuxicnsglgk.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-co27o4xxato.png" src="../_images/reposition_clefs-co27o4xxato.png" />
</div>
<p>Set the argument <code class="docutils literal notranslate"><span class="pre">implicit_clef</span></code> to a different <a class="reference external" href="https://abjad.github.io/api/abjad/indicators/Clef.html#abjad.indicators.Clef.Clef" title="(in Abjad v3.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Clef</span></code></a> to
change the implicit clef.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c1 | d1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;bass&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c1</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    d1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-jyp5xd92vgi.png" src="../_images/reposition_clefs-jyp5xd92vgi.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_clefs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">implicit_clef</span><span class="o">=</span><span class="n">abjad</span><span class="o">.</span><span class="n">Clef</span><span class="p">(</span><span class="s1">&#39;bass&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c1</span>
<span class="go">    d1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-o7bi4n2n58.png" src="../_images/reposition_clefs-o7bi4n2n58.png" />
</div>
<p>This can be useful when extending a container that already has a
specific clef.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">music</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\clef bass c4 d4 e4 f4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">music</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">music</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    c4</span>
<span class="go">    d4</span>
<span class="go">    e4</span>
<span class="go">    f4</span>
<span class="go">    c1</span>
<span class="go">    d1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_clefs-7y32wepotnf.png" src="../_images/reposition_clefs-7y32wepotnf.png" />
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.reposition_dynamics">
<code class="sig-name descname">reposition_dynamics</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">allow_hairpins_under_rests</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">check_hairpin_trends</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">remove_repeated_dynamics</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">allow_hairpin_to_rest_with_dynamic</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.reposition_dynamics" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function shifts all dynamics from rests to the next pitched leaves. It
will also adjust hairpins if necessary.</p>
<dl>
<dt>Basic usage:</dt><dd><p>This function will shift dynamics under rests to the next pitched leaf.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p d&#39;2 r2\f r1 e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    \f</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-sqwvevg7o9.png" src="../_images/reposition_dynamics-sqwvevg7o9.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p d&#39;2 r2\f r1 e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \f</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-v18uzh1zjs.png" src="../_images/reposition_dynamics-v18uzh1zjs.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Removing dynamics:</dt><dd><p>If the next pitched leaf already contain a dynamic, this function will
simply remove the dynamic under the rest.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p d&#39;2 r2\f r1\mf e&#39;1\pp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    \f</span>
<span class="go">    r1</span>
<span class="go">    \mf</span>
<span class="go">    e&#39;1</span>
<span class="go">    \pp</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-aom2qywcn9m.png" src="../_images/reposition_dynamics-aom2qywcn9m.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p d&#39;2 r2\f r1\mf e&#39;1\pp&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \pp</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-2ua73x102fp.png" src="../_images/reposition_dynamics-2ua73x102fp.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">remove_repeated_dynamics</span></code>:</dt><dd><p>By default indentical repeated dynamics are omitted.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p d&#39;1 r1\f e&#39;1\p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    d&#39;1</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-i4x8b1z1ak.png" src="../_images/reposition_dynamics-i4x8b1z1ak.png" />
</div>
<p>Set the optional keyword argument <code class="docutils literal notranslate"><span class="pre">remove_repeated_dynamics</span></code> to
<code class="docutils literal notranslate"><span class="pre">False</span></code> to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p d&#39;1 r1\f e&#39;1\p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">remove_repeated_dynamics</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    d&#39;1</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \p</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-se8a5aeqer.png" src="../_images/reposition_dynamics-se8a5aeqer.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow_hairpins_under_rests</span></code>:</dt><dd><p>This function will shorten hairpins until rests by default.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p\&lt; d&#39;2 r2 r1\f e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    r1</span>
<span class="go">    \f</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-r28po3j3hd.png" src="../_images/reposition_dynamics-r28po3j3hd.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p\&lt; d&#39;2 r2 r1\f e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    \!</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \f</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-n60vvnqrcnr.png" src="../_images/reposition_dynamics-n60vvnqrcnr.png" />
</div>
<p>Set the optional keyword argument <code class="docutils literal notranslate"><span class="pre">allow_hairpins_under_rests</span></code> to
<code class="docutils literal notranslate"><span class="pre">True</span></code> to allow hairpins to extend cross rests.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p\&lt; d&#39;2 r2 r1\f e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">allow_hairpins_under_rests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \f</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-ugit7ijz89h.png" src="../_images/reposition_dynamics-ugit7ijz89h.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow_hairpin_to_rest_with_dynamic</span></code>:</dt><dd><p>Notice that if a hairpin leads to a rest with dynamic, that one is not
removed.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p\&lt; d&#39;2 r2\f r1 e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    \f</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-t9z4y5zzj6.png" src="../_images/reposition_dynamics-t9z4y5zzj6.png" />
</div>
<p>Set the argument <code class="docutils literal notranslate"><span class="pre">allow_hairpin_to_rest_with_dynamic</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code> to
disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p\&lt; d&#39;2 r2\f r1 e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">allow_hairpin_to_rest_with_dynamic</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    \!</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">    \f</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-wpwweov55qf.png" src="../_images/reposition_dynamics-wpwweov55qf.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">check_hairpin_trends</span></code>:</dt><dd><p>This function will remove any hairpins connecting dynamics that grow in
the opposite direction to the hairpin’s trend, such as a diminuendo
hairpin from piano to forte.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p\&gt; d&#39;1\f\&gt; e&#39;1\p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    \&gt;</span>
<span class="go">    e&#39;1</span>
<span class="go">    \p</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-f0b4ppb71ii.png" src="../_images/reposition_dynamics-f0b4ppb71ii.png" />
</div>
<p>This behaviour can be disabled by setting the argument
<code class="docutils literal notranslate"><span class="pre">check_hairpin_trends</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p\&gt; d&#39;1\f\&gt; e&#39;1\p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">check_hairpin_trends</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&gt;</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    \&gt;</span>
<span class="go">    e&#39;1</span>
<span class="go">    \p</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-1e2ugszm95fi.png" src="../_images/reposition_dynamics-1e2ugszm95fi.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The behaviour described above is only applicable when a hairpin ends
on a dynamic. Using the hairpin terminator <code class="docutils literal notranslate"><span class="pre">\!</span></code> before a dynamic
change will not cause a hairpin to be removed as it is not considered
to be connecting dynamics of the opposite trend.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p\&gt; d&#39;1\! e&#39;1\f\&gt; f&#39;1\p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&gt;</span>
<span class="go">    d&#39;1</span>
<span class="go">    \!</span>
<span class="go">    e&#39;1</span>
<span class="go">    \f</span>
<span class="go">    \&gt;</span>
<span class="go">    f&#39;1</span>
<span class="go">    \p</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-77g0uwthbgd.png" src="../_images/reposition_dynamics-77g0uwthbgd.png" />
</div>
</div>
<dl>
<dt>Types of hairpins:</dt><dd><p>This function can handle multiple types of hairpins as well as niente
dynamics.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 d&#39;1 e&#39;1 r1\mf r1\ff f&#39;1 r1 g&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s1">&#39;niente&#39;</span><span class="p">,</span> <span class="n">hide</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Dynamic</span><span class="p">(</span><span class="s1">&#39;niente&#39;</span><span class="p">,</span> <span class="n">hide</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">StartHairpin</span><span class="p">(</span><span class="s1">&#39;o&lt;&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">StartHairpin</span><span class="p">(</span><span class="s1">&#39;&gt;o&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">StopHairpin</span><span class="p">(),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    - \tweak circled-tip ##t</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;1</span>
<span class="go">    e&#39;1</span>
<span class="go">    r1</span>
<span class="go">    \mf</span>
<span class="go">    r1</span>
<span class="go">    f&#39;1</span>
<span class="go">    \ff</span>
<span class="go">    - \tweak circled-tip ##t</span>
<span class="go">    \&gt;</span>
<span class="go">    r1</span>
<span class="go">    \!</span>
<span class="go">    g&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-m8it9awv1ce.png" src="../_images/reposition_dynamics-m8it9awv1ce.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;c&#39;1\p d&#39;1\f\&gt; e&#39;1\ff\&lt; r1\fff f&#39;1\p\&gt; g&#39;1\ppp&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">StartHairpin</span><span class="p">(</span><span class="s1">&#39;--&#39;</span><span class="p">),</span> <span class="n">staff</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    - \tweak stencil #constante-hairpin</span>
<span class="go">    \&lt;</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">    e&#39;1</span>
<span class="go">    \ff</span>
<span class="go">    \&lt;</span>
<span class="go">    r1</span>
<span class="go">    \fff</span>
<span class="go">    f&#39;1</span>
<span class="go">    \p</span>
<span class="go">    \&gt;</span>
<span class="go">    g&#39;1</span>
<span class="go">    \ppp</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-fosad5ltzj.png" src="../_images/reposition_dynamics-fosad5ltzj.png" />
</div>
</dd>
<dt>Multi-measure rests:</dt><dd><p>Multi-measure rests are also supported.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p R1\f d&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    R1</span>
<span class="go">    \f</span>
<span class="go">    d&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-uj6jasfs2uh.png" src="../_images/reposition_dynamics-uj6jasfs2uh.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1\p R1\f d&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_dynamics</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    \p</span>
<span class="go">    R1</span>
<span class="go">    d&#39;1</span>
<span class="go">    \f</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_dynamics-axpcbm9hocd.png" src="../_images/reposition_dynamics-axpcbm9hocd.png" />
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.reposition_slurs">
<code class="sig-name descname">reposition_slurs</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">allow_slurs_under_rests</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">close_unterminated_final_slur</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.reposition_slurs" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function repositions all slurs that starts or ends on rests.</p>
<dl>
<dt>Basic usage:</dt><dd><p>This function will shift slurs that ends on rests to the previous
pitched leaf.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2) r1 e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    )</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-uxji4xx6ftk.png" src="../_images/reposition_slurs-uxji4xx6ftk.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2) r1 e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    )</span>
<span class="go">    r2</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-7nnp5cttm4y.png" src="../_images/reposition_slurs-7nnp5cttm4y.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Rests:</dt><dd><p>Slurs starting on rests are shifted to the next pitched leaf.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 r2( d&#39;2 e&#39;1)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    r2</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    e&#39;1</span>
<span class="go">    )</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-2j7hgqd7bt1.png" src="../_images/reposition_slurs-2j7hgqd7bt1.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1 r2( d&#39;2 e&#39;1)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    r2</span>
<span class="go">    d&#39;2</span>
<span class="go">    (</span>
<span class="go">    e&#39;1</span>
<span class="go">    )</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-i957u1wt30m.png" src="../_images/reposition_slurs-i957u1wt30m.png" />
</div>
</dd>
<dt>Multiple rests:</dt><dd><p>This function also works when multiple rests are present.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2 r1) e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    r1</span>
<span class="go">    )</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-v76u42x7idk.png" src="../_images/reposition_slurs-v76u42x7idk.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2 r1) e&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    )</span>
<span class="go">    r2</span>
<span class="go">    r1</span>
<span class="go">    e&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-burs1t0daid.png" src="../_images/reposition_slurs-burs1t0daid.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow_slurs_under_rests</span></code>:</dt><dd><p>By default, a slur crossing a rest is broken into two.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2 e&#39;1 f&#39;1)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    )</span>
<span class="go">    r2</span>
<span class="go">    e&#39;1</span>
<span class="go">    (</span>
<span class="go">    f&#39;1</span>
<span class="go">    )</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-8wb7orpt285.png" src="../_images/reposition_slurs-8wb7orpt285.png" />
</div>
<p>Set the optional keyword argument <code class="docutils literal notranslate"><span class="pre">allow_slurs_under_rests</span></code> to
<code class="docutils literal notranslate"><span class="pre">True</span></code> to allow slurs under rests.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2 e&#39;1 f&#39;1)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">allow_slurs_under_rests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    r2</span>
<span class="go">    e&#39;1</span>
<span class="go">    f&#39;1</span>
<span class="go">    )</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-ftb59kz6u8j.png" src="../_images/reposition_slurs-ftb59kz6u8j.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">close_unterminated_final_slur</span></code>:</dt><dd><p>By default, unterminated slurs at the end of the selection are closed
when possible or removed when not.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2 e&#39;2 f&#39;2) g&#39;1( a&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    )</span>
<span class="go">    r2</span>
<span class="go">    e&#39;2</span>
<span class="go">    (</span>
<span class="go">    f&#39;2</span>
<span class="go">    )</span>
<span class="go">    g&#39;1</span>
<span class="go">    (</span>
<span class="go">    a&#39;1</span>
<span class="go">    )</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-70dli8e0kqr.png" src="../_images/reposition_slurs-70dli8e0kqr.png" />
</div>
<p>Set the optional keyword argument <code class="docutils literal notranslate"><span class="pre">close_unterminated_final_slur</span></code> to
<code class="docutils literal notranslate"><span class="pre">False</span></code> to disable this behaviour.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2 e&#39;2 f&#39;2) g&#39;1( a&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">close_unterminated_final_slur</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    )</span>
<span class="go">    r2</span>
<span class="go">    e&#39;2</span>
<span class="go">    (</span>
<span class="go">    f&#39;2</span>
<span class="go">    )</span>
<span class="go">    g&#39;1</span>
<span class="go">    (</span>
<span class="go">    a&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-1usa2dezl45.png" src="../_images/reposition_slurs-1usa2dezl45.png" />
</div>
<p>When there are no pitched leaves left after an unterminated open slur,
it is removed.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2 r2 e&#39;2 f&#39;2) g&#39;1( r1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    )</span>
<span class="go">    r2</span>
<span class="go">    e&#39;2</span>
<span class="go">    (</span>
<span class="go">    f&#39;2</span>
<span class="go">    )</span>
<span class="go">    g&#39;1</span>
<span class="go">    r1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-a0uakfcltuf.png" src="../_images/reposition_slurs-a0uakfcltuf.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Duplicate slur starts or stops are removed. Note that the score output
will not change, as LilyPond also ignores duplicate slurs, but the
output of <code class="xref py py-func docutils literal notranslate"><span class="pre">abjad.f()</span></code> will be cleaner.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;1( d&#39;2) e&#39;2) f&#39;2( g&#39;2( a&#39;1)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">reposition_slurs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;1</span>
<span class="go">    (</span>
<span class="go">    d&#39;2</span>
<span class="go">    )</span>
<span class="go">    e&#39;2</span>
<span class="go">    f&#39;2</span>
<span class="go">    (</span>
<span class="go">    g&#39;2</span>
<span class="go">    a&#39;1</span>
<span class="go">    )</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/reposition_slurs-0ugn322x3tr.png" src="../_images/reposition_slurs-0ugn322x3tr.png" />
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.respell_accidentals">
<code class="sig-name descname">respell_accidentals</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">include_multiples</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em>, <em class="sig-param"><span class="n">respell_by_pitch_class</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.respell_accidentals" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function changes the accidentals of individual pitches of all chords
in a container in order to avoid augmented unisons.</p>
<dl>
<dt>Basic usage:</dt><dd><p>To use this function, apply it to a selection that contains chords that
have augmented unisons.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;4 r4 &lt;ef&#39; e&#39;&gt;4 g&#39;4 &lt;c&#39; cs&#39;&gt;4 r2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    r4</span>
<span class="go">    &lt;ds&#39; e&#39;&gt;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    &lt;c&#39; df&#39;&gt;4</span>
<span class="go">    r2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/respell_accidentals-x33afbbamt.png" src="../_images/respell_accidentals-x33afbbamt.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>2-note chords:</dt><dd><p>The example below shows the default spelling of 2-note chords in
Abjad in the upper staff, and the respelt 2-note chords in the bottom
staff.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">staff1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="n">pitch</span><span class="p">,</span> <span class="n">pitch</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">)))</span>
<span class="gp">... </span>    <span class="n">staff2</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Chord</span><span class="p">([</span><span class="n">pitch</span><span class="p">,</span> <span class="n">pitch</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff2</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">literal</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondLiteral</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\accidentalStyle dodecaphonic&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">staff1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">literal</span><span class="p">,</span> <span class="n">staff2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">staff1</span><span class="p">,</span> <span class="n">staff2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="go">\new Score</span>
<span class="go">&lt;&lt;</span>
<span class="go">    \new Staff</span>
<span class="go">    {</span>
<span class="go">        \accidentalStyle dodecaphonic</span>
<span class="go">        &lt;c&#39; cs&#39;&gt;16</span>
<span class="go">        &lt;cs&#39; d&#39;&gt;16</span>
<span class="go">        &lt;d&#39; ef&#39;&gt;16</span>
<span class="go">        &lt;ef&#39; e&#39;&gt;16</span>
<span class="go">        &lt;e&#39; f&#39;&gt;16</span>
<span class="go">        &lt;f&#39; fs&#39;&gt;16</span>
<span class="go">        &lt;fs&#39; g&#39;&gt;16</span>
<span class="go">        &lt;g&#39; af&#39;&gt;16</span>
<span class="go">        &lt;af&#39; a&#39;&gt;16</span>
<span class="go">        &lt;a&#39; bf&#39;&gt;16</span>
<span class="go">        &lt;bf&#39; b&#39;&gt;16</span>
<span class="go">        &lt;b&#39; c&#39;&#39;&gt;16</span>
<span class="go">    }</span>
<span class="go">    \new Staff</span>
<span class="go">    {</span>
<span class="go">        \accidentalStyle dodecaphonic</span>
<span class="go">        &lt;c&#39; df&#39;&gt;16</span>
<span class="go">        &lt;cs&#39; d&#39;&gt;16</span>
<span class="go">        &lt;d&#39; ef&#39;&gt;16</span>
<span class="go">        &lt;ds&#39; e&#39;&gt;16</span>
<span class="go">        &lt;e&#39; f&#39;&gt;16</span>
<span class="go">        &lt;f&#39; gf&#39;&gt;16</span>
<span class="go">        &lt;fs&#39; g&#39;&gt;16</span>
<span class="go">        &lt;g&#39; af&#39;&gt;16</span>
<span class="go">        &lt;gs&#39; a&#39;&gt;16</span>
<span class="go">        &lt;a&#39; bf&#39;&gt;16</span>
<span class="go">        &lt;as&#39; b&#39;&gt;16</span>
<span class="go">        &lt;b&#39; c&#39;&#39;&gt;16</span>
<span class="go">    }</span>
<span class="go">&gt;&gt;</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/respell_accidentals-jvg032q24il.png" src="../_images/respell_accidentals-jvg032q24il.png" />
</div>
</dd>
<dt>augmented unissons in larger chords:</dt><dd><p>The function looks for all augmented unissons in chords of 3 or more
pitches:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;a c&#39; cs&#39; f&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;a c&#39; cs&#39; f&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    {</span>
<span class="go">        &lt;a c&#39; cs&#39; f&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">    {</span>
<span class="go">        &lt;a c&#39; df&#39; f&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/respell_accidentals-gyficck05p.png" src="../_images/respell_accidentals-gyficck05p.png" />
</div>
<p>It is not a problem if the pitches are input out of order.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;e&#39; cs&#39; g&#39; ef&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;e&#39; cs&#39; g&#39; ef&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    {</span>
<span class="go">        &lt;cs&#39; ef&#39; e&#39; g&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">    {</span>
<span class="go">        &lt;cs&#39; ds&#39; e&#39; g&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/respell_accidentals-xbu6u6mu6qo.png" src="../_images/respell_accidentals-xbu6u6mu6qo.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">include_multiples</span></code>:</dt><dd><p>By default, this function only changes spelling for pitches that are
1 semitone apart.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;c&#39; cs&#39;&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;c&#39; cs&#39;&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    {</span>
<span class="go">        &lt;c&#39; cs&#39;&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">    {</span>
<span class="go">        &lt;c&#39; cs&#39;&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/respell_accidentals-uszf11qb72d.png" src="../_images/respell_accidentals-uszf11qb72d.png" />
</div>
<p>To consider pitches in different octaves (thus including augmented
unisons, augmented octaves, augmented fifteenths, etc.), call this
function with the keyword argument <code class="docutils literal notranslate"><span class="pre">include_multiples</span></code> set to
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;c&#39; cs&#39;&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;c&#39; cs&#39;&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">include_multiples</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    {</span>
<span class="go">        &lt;c&#39; cs&#39;&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">    {</span>
<span class="go">        &lt;c&#39; df&#39;&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/respell_accidentals-8am8cu2rmgi.png" src="../_images/respell_accidentals-8am8cu2rmgi.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">respell_by_pitch_class</span></code>:</dt><dd><p>By default, when this function changes the spelling of a pitch, it does
not change the spelling of all other pitches with the same pitch-class.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;c&#39; cs&#39; cs&#39;&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;c&#39; cs&#39; cs&#39;&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    {</span>
<span class="go">        &lt;c&#39; cs&#39; cs&#39;&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">    {</span>
<span class="go">        &lt;c&#39; df&#39; cs&#39;&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/respell_accidentals-47d16xk6gvs.png" src="../_images/respell_accidentals-47d16xk6gvs.png" />
</div>
<p>To alter all pitch-classes, call this function with the keyword
argument <code class="docutils literal notranslate"><span class="pre">respell_by_pitch_class</span></code> set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;c&#39; cs&#39; cs&#39;&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;&lt;c&#39; cs&#39; cs&#39;&#39;&gt;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container2</span><span class="p">[:])</span><span class="o">.</span><span class="n">respell_accidentals</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">respell_by_pitch_class</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    {</span>
<span class="go">        &lt;c&#39; cs&#39; cs&#39;&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">    {</span>
<span class="go">        &lt;c&#39; df&#39; df&#39;&#39;&gt;1</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/respell_accidentals-kobft0oq9sl.png" src="../_images/respell_accidentals-kobft0oq9sl.png" />
</div>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.rests_to_multimeasure_rest">
<code class="sig-name descname">rests_to_multimeasure_rest</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">ignore_clefs</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">False</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.rests_to_multimeasure_rest" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Selection</span></code> in place and has no return value;
this function looks for measures filled with regular rests and converts
them into an <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.MultimeasureRest</span></code>.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Converts any measure filled with regular rests into a measure with a
single multi-measure rest.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;r1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    R1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-uvebc7ft1zo.png" src="../_images/rests_to_multimeasure_rest-uvebc7ft1zo.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Multiple rests:</dt><dd><p>Works with measures with multiple regular rests.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;r2 r8.. r32 r16 r8 r16&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    r2</span>
<span class="go">    r8..</span>
<span class="go">    r32</span>
<span class="go">    r16</span>
<span class="go">    r8</span>
<span class="go">    r16</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-jk4m1wzsyfa.png" src="../_images/rests_to_multimeasure_rest-jk4m1wzsyfa.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    R1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-z8u0cs3fzdi.png" src="../_images/rests_to_multimeasure_rest-z8u0cs3fzdi.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code>’s, all time signatures in the output will
be commented out with <code class="docutils literal notranslate"><span class="pre">%%%.</span></code> This is because Abjad only applies time
signatures to containers that belong to a <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>. The present
function works with either <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    %%% \time 3/4 %%%</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-qtq55xbkkts.png" src="../_images/rests_to_multimeasure_rest-qtq55xbkkts.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-9hceg93vrmv.png" src="../_images/rests_to_multimeasure_rest-9hceg93vrmv.png" />
</div>
</div>
<dl>
<dt>Time signature changes:</dt><dd><p>Works with selections from containers with multiple time signatures as
well as notes.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 r2. | &quot;</span>
<span class="gp">... </span>                        <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">ime 6/8 r2. | &quot;</span>
<span class="gp">... </span>                        <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">ime 5/4 c&#39;1 ~ c&#39;4 | r1 r4&quot;</span>
<span class="gp">... </span>                        <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    R1 * 3/4</span>
<span class="go">    \time 6/8</span>
<span class="go">    R1 * 3/4</span>
<span class="go">    \time 5/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    ~</span>
<span class="go">    c&#39;4</span>
<span class="go">    R1 * 5/4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-a9sqdcznoq.png" src="../_images/rests_to_multimeasure_rest-a9sqdcznoq.png" />
</div>
</dd>
<dt>Tuplets:</dt><dd><p>Works with containers with tuplets.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\times 2/3 {r2 r2 r2}&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r2</span>
<span class="go">        r2</span>
<span class="go">        r2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-480a9zqvk2a.png" src="../_images/rests_to_multimeasure_rest-480a9zqvk2a.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    R1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-r5yg3a3f97q.png" src="../_images/rests_to_multimeasure_rest-r5yg3a3f97q.png" />
</div>
<p>It also works with containers with tuplets within tuplets.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;r2 \times 2/3 {r2 r4} \times 4/5 {r2. \times 2/3 {r2 r4}}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    r2</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r2</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        r2.</span>
<span class="go">        \times 2/3 {</span>
<span class="go">            r2</span>
<span class="go">            r4</span>
<span class="go">        }</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-codydc205jw.png" src="../_images/rests_to_multimeasure_rest-codydc205jw.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">container</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    R1</span>
<span class="go">    R1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-f647t5j3jgw.png" src="../_images/rests_to_multimeasure_rest-f647t5j3jgw.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ignore_clefs</span></code></dt><dd><p>By default, the last clef of an empty measure is preserved when
replacing it with a multi-measure rest:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\clef bass r4 r4 \times 2/3 {r4 r8} r4 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 3/4 \clef treble r2. &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 5/4 r2 \clef bass r2.&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    r4</span>
<span class="go">    r4</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r4</span>
<span class="go">        r8</span>
<span class="go">    }</span>
<span class="go">    r4</span>
<span class="go">    \time 3/4</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    r2.</span>
<span class="go">    \time 5/4</span>
<span class="go">    r2</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    r2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-6GMRGmYkEQ.png" src="../_images/rests_to_multimeasure_rest-6GMRGmYkEQ.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    R1</span>
<span class="go">    \time 3/4</span>
<span class="go">    \clef &quot;treble&quot;</span>
<span class="go">    R1 * 3/4</span>
<span class="go">    \time 5/4</span>
<span class="go">    \clef &quot;bass&quot;</span>
<span class="go">    R1 * 5/4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-UnL6ZoFoDC.png" src="../_images/rests_to_multimeasure_rest-UnL6ZoFoDC.png" />
</div>
<p>Invoke the mutation with <code class="docutils literal notranslate"><span class="pre">ignore_clefs</span></code> set to <code class="docutils literal notranslate"><span class="pre">True</span></code> to disable
this behaviour and ignore all clefs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\clef bass r4 r4 \times 2/3 {r4 r8} r4 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 3/4 \clef treble r2. &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 5/4 r2 \clef bass r2.&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">[:])</span><span class="o">.</span><span class="n">rests_to_multimeasure_rest</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">ignore_clefs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    R1</span>
<span class="go">    \time 3/4</span>
<span class="go">    R1 * 3/4</span>
<span class="go">    \time 5/4</span>
<span class="go">    R1 * 5/4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/rests_to_multimeasure_rest-KGRZJ8fvQF.png" src="../_images/rests_to_multimeasure_rest-KGRZJ8fvQF.png" />
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input selection must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.sustain_notes">
<code class="sig-name descname">sustain_notes</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">sustain_multimeasure_rests</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">rewrite_meter</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.sustain_notes" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates an input container (of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child class)
in place and has no return value; this function will sustain all pitched
leaves until the next pitched leaf, thus replacing all rests in between
them.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Simply call the function on a container.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;16 r8. d&#39;16 r8. e&#39;16 r8. f&#39;16 r8.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    d&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    e&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    f&#39;16</span>
<span class="go">    r8.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-w1e1pmruyce.png" src="../_images/sustain_notes-w1e1pmruyce.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">sustain_notes</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-ythfpvkrvue.png" src="../_images/sustain_notes-ythfpvkrvue.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">close_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">close_containers</span><span class="p">()</span>
</pre></div>
</div>
</div>
<dl>
<dt>Leaves with same pitch:</dt><dd><p>Leaves are sustained until the next pitched leaf, even if the pitch is
the same.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;16 r8. c&#39;16 r8. c&#39;16 r8. c&#39;16 r8.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-oliqicqqw7q.png" src="../_images/sustain_notes-oliqicqqw7q.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">sustain_notes</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    c&#39;4</span>
<span class="go">    c&#39;4</span>
<span class="go">    c&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-3alcbmhc2jt.png" src="../_images/sustain_notes-3alcbmhc2jt.png" />
</div>
</dd>
<dt>Consecutive leaves with the same pitch:</dt><dd><p>Consecutive pitched leaves with a same pitch will not be tied.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;&lt;c&#39; e&#39;&gt;16 r8. &lt;c&#39; e&#39;&gt;4 &lt;c&#39; e&#39;&gt;4 &lt;c&#39; e&#39;&gt;16 r8.&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    &lt;c&#39; e&#39;&gt;16</span>
<span class="go">    r8.</span>
<span class="go">    &lt;c&#39; e&#39;&gt;4</span>
<span class="go">    &lt;c&#39; e&#39;&gt;4</span>
<span class="go">    &lt;c&#39; e&#39;&gt;16</span>
<span class="go">    r8.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-ek4ujjintt8.png" src="../_images/sustain_notes-ek4ujjintt8.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">sustain_notes</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    &lt;c&#39; e&#39;&gt;4</span>
<span class="go">    &lt;c&#39; e&#39;&gt;4</span>
<span class="go">    &lt;c&#39; e&#39;&gt;4</span>
<span class="go">    &lt;c&#39; e&#39;&gt;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-f7au6hojq99.png" src="../_images/sustain_notes-f7au6hojq99.png" />
</div>
</dd>
<dt>Tuplets:</dt><dd><p>This function handles tuplets.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {c&#39;4 d&#39;4 r4} r8 e&#39;8 \times 2/3 {f&#39;8 r4}&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;4</span>
<span class="go">        d&#39;4</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    r8</span>
<span class="go">    e&#39;8</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        f&#39;8</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-nsjvhnyrkea.png" src="../_images/sustain_notes-nsjvhnyrkea.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">sustain_notes</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        c&#39;4</span>
<span class="go">        d&#39;2</span>
<span class="go">        ~</span>
<span class="go">    }</span>
<span class="go">    d&#39;8</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-26l9hob8wko.png" src="../_images/sustain_notes-26l9hob8wko.png" />
</div>
</dd>
<dt>Complex example:</dt><dd><p>This function can handle containers with a mixture of notes, chords,
and rests, as well as tuplets.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;c&#39;16 r8. d&#39;16 r8. r8 r32 &lt;e&#39; g&#39;&gt;32 r16 r4 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\times 2/3 {r4 f&#39;4 r4} r4 g&#39;8 r8 a&#39;4 ~ &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;a&#39;16 r8. b&#39;4 c&#39;&#39;8 r8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;r4. d&#39;&#39;8 \times 4/5 {r8 d&#39;&#39;2}&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    d&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    r8</span>
<span class="go">    r32</span>
<span class="go">    &lt;e&#39; g&#39;&gt;32</span>
<span class="go">    r16</span>
<span class="go">    r4</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        r4</span>
<span class="go">        f&#39;4</span>
<span class="go">        r4</span>
<span class="go">    }</span>
<span class="go">    r4</span>
<span class="go">    g&#39;8</span>
<span class="go">    r8</span>
<span class="go">    a&#39;4</span>
<span class="go">    ~</span>
<span class="go">    a&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;8</span>
<span class="go">    r8</span>
<span class="go">    r4.</span>
<span class="go">    d&#39;&#39;8</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        r8</span>
<span class="go">        d&#39;&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-cpw7dvpegge.png" src="../_images/sustain_notes-cpw7dvpegge.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">sustain_notes</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    ~</span>
<span class="go">    d&#39;8</span>
<span class="go">    ~</span>
<span class="go">    d&#39;32</span>
<span class="go">    &lt;e&#39; g&#39;&gt;16.</span>
<span class="go">    ~</span>
<span class="go">    &lt;e&#39; g&#39;&gt;4</span>
<span class="go">    ~</span>
<span class="go">    \times 2/3 {</span>
<span class="go">        &lt;e&#39; g&#39;&gt;4</span>
<span class="go">        f&#39;2</span>
<span class="go">        ~</span>
<span class="go">    }</span>
<span class="go">    f&#39;4</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;2</span>
<span class="go">    b&#39;4</span>
<span class="go">    c&#39;&#39;4</span>
<span class="go">    ~</span>
<span class="go">    c&#39;&#39;4.</span>
<span class="go">    d&#39;&#39;8</span>
<span class="go">    ~</span>
<span class="go">    \times 4/5 {</span>
<span class="go">        d&#39;&#39;8</span>
<span class="go">        d&#39;&#39;2</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-z8t2jwxsvar.png" src="../_images/sustain_notes-z8t2jwxsvar.png" />
</div>
</dd>
<dt>Multi-measure rests:</dt><dd><p>This mutation also handles multi-measure rests, including ones with
non-assignable durations:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;r4 c&#39;16 r8. d&#39;16 r4.. &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;R1&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;r4 e&#39;4 r2&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 5/8 r8 f&#39;4 r4&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;R1 * 5/8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;r8 g&#39;8 a&#39;8 r4&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    r4</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    d&#39;16</span>
<span class="go">    r4..</span>
<span class="go">    R1</span>
<span class="go">    r4</span>
<span class="go">    e&#39;4</span>
<span class="go">    r2</span>
<span class="go">    \time 5/8</span>
<span class="go">    r8</span>
<span class="go">    f&#39;4</span>
<span class="go">    r4</span>
<span class="go">    R1 * 5/8</span>
<span class="go">    r8</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-mJOOARIUAp.png" src="../_images/sustain_notes-mJOOARIUAp.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">sustain_notes</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    r4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    ~</span>
<span class="go">    d&#39;1</span>
<span class="go">    ~</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    \time 5/8</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;2</span>
<span class="go">    ~</span>
<span class="go">    f&#39;4.</span>
<span class="go">    ~</span>
<span class="go">    f&#39;4</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;4</span>
<span class="go">    a&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-iLTiWERSvO.png" src="../_images/sustain_notes-iLTiWERSvO.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sustain_multimeasure_rests</span></code>:</dt><dd><p>By default, notes are tied across multi-measure rests.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;r4 c&#39;16 r8. d&#39;16 r4.. &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;R1&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;r4 e&#39;4 r2&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 5/8 r8 f&#39;4 r4&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;R1 * 5/8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;r8 g&#39;8 a&#39;8 r4&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    r4</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    d&#39;16</span>
<span class="go">    r4..</span>
<span class="go">    R1</span>
<span class="go">    r4</span>
<span class="go">    e&#39;4</span>
<span class="go">    r2</span>
<span class="go">    \time 5/8</span>
<span class="go">    r8</span>
<span class="go">    f&#39;4</span>
<span class="go">    r4</span>
<span class="go">    R1 * 5/8</span>
<span class="go">    r8</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-P2CLdKi6Cs.png" src="../_images/sustain_notes-P2CLdKi6Cs.png" />
</div>
<p>To disable sustaining across those, set <code class="docutils literal notranslate"><span class="pre">sustain_multimeasure_rests</span></code>
to  <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">sustain_notes</span><span class="p">(</span><span class="n">sustain_multimeasure_rests</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    r4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;2</span>
<span class="go">    R1</span>
<span class="go">    r4</span>
<span class="go">    e&#39;2.</span>
<span class="go">    ~</span>
<span class="go">    \time 5/8</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;2</span>
<span class="go">    R1 * 5/8</span>
<span class="go">    r8</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;4.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-9WeilArLex.png" src="../_images/sustain_notes-9WeilArLex.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rewrite_meter</span></code>:</dt><dd><p>By default, <a class="reference internal" href="#auxjad.Mutation.auto_rewrite_meter" title="auxjad.Mutation.auto_rewrite_meter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">auxjad.mutate().auto_rewrite_meter()</span></code></a> is summoned after
notes are sustained.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;r4 c&#39;16 r8. d&#39;16 r4.. &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;R1&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;r4 e&#39;4 r2&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;\time 5/8 r8 f&#39;4 r4&quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;R1 * 5/8 &quot;</span>
<span class="gp">... </span>                    <span class="sa">r</span><span class="s2">&quot;r8 g&#39;8 a&#39;8 r4&quot;</span>
<span class="gp">... </span>                    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    r4</span>
<span class="go">    c&#39;16</span>
<span class="go">    r8.</span>
<span class="go">    d&#39;16</span>
<span class="go">    r4..</span>
<span class="go">    R1</span>
<span class="go">    r4</span>
<span class="go">    e&#39;4</span>
<span class="go">    r2</span>
<span class="go">    \time 5/8</span>
<span class="go">    r8</span>
<span class="go">    f&#39;4</span>
<span class="go">    r4</span>
<span class="go">    R1 * 5/8</span>
<span class="go">    r8</span>
<span class="go">    g&#39;8</span>
<span class="go">    a&#39;8</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-P2CLdKi6Cs.png" src="../_images/sustain_notes-P2CLdKi6Cs.png" />
</div>
<p>To disable this behaviour, set <code class="docutils literal notranslate"><span class="pre">rewrite_meter</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span><span class="o">.</span><span class="n">sustain_notes</span><span class="p">(</span><span class="n">rewrite_meter</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    r4</span>
<span class="go">    c&#39;16</span>
<span class="go">    ~</span>
<span class="go">    c&#39;8.</span>
<span class="go">    d&#39;16</span>
<span class="go">    ~</span>
<span class="go">    d&#39;4..</span>
<span class="go">    ~</span>
<span class="go">    d&#39;1</span>
<span class="go">    ~</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    ~</span>
<span class="go">    e&#39;2</span>
<span class="go">    ~</span>
<span class="go">    \time 5/8</span>
<span class="go">    e&#39;8</span>
<span class="go">    f&#39;4</span>
<span class="go">    ~</span>
<span class="go">    f&#39;4</span>
<span class="go">    ~</span>
<span class="go">    f&#39;2</span>
<span class="go">    ~</span>
<span class="go">    f&#39;8</span>
<span class="go">    f&#39;8</span>
<span class="go">    g&#39;8</span>
<span class="go">    ~</span>
<span class="go">    a&#39;8</span>
<span class="go">    a&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sustain_notes-9WeilArLex.png" src="../_images/sustain_notes-9WeilArLex.png" />
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The input container must be a contiguous logical voice. When dealing
with a container with multiple subcontainers (e.g. a score containing
multiple staves), the best approach is to cycle through these
subcontainers, applying this function to them individually.</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="auxjad.Mutation.sync_containers">
<code class="sig-name descname">sync_containers</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span></em>, <em class="sig-param"><span class="n">use_multimeasure_rests</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em>, <em class="sig-param"><span class="n">adjust_last_time_signature</span><span class="p">:</span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)">bool</a></span> <span class="o">=</span> <span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)">None</a><a class="headerlink" href="#auxjad.Mutation.sync_containers" title="Permalink to this definition">¶</a></dt>
<dd><p>Mutates two or more input containers in place and has no return value;
this function finds the longest container among the inputs and adds rests
to all the shorter ones, making them the same length. Input argument can
be a single <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Score</span></code> with multiple containers, or an iterable with
elements of type <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> or child classes.</p>
<dl>
<dt>Basic usage:</dt><dd><p>Input two or more containers. This function will fill the shortest ones
with rests ensuring all their lengths become the same.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 g&#39;2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">staff1</span><span class="p">,</span> <span class="n">staff2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    g&#39;2.</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-akcdf8t9e5.png" src="../_images/sync_containers-akcdf8t9e5.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">staff2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-l7tru1tjoli.png" src="../_images/sync_containers-l7tru1tjoli.png" />
</div>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Auxjad automatically adds this function as an extension method to
<code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. It can thus be used from either
<a class="reference internal" href="auxjad.mutate.html#auxjad.mutate" title="auxjad.mutate"><code class="xref py py-func docutils literal notranslate"><span class="pre">auxjad.mutate()</span></code></a> or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.mutate()</span></code>. Therefore, the two lines
below are equivalent:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code>’s, all time signatures in the output will
be commented out with <code class="docutils literal notranslate"><span class="pre">%%%.</span></code> This is because Abjad only applies time
signatures to containers that belong to a <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>. The present
function works with either <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;4 d&#39;4 e&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    %%% \time 3/4 %%%</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-9sl3dnd2uwn.png" src="../_images/sync_containers-9sl3dnd2uwn.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-08v2pv2tmqqn.png" src="../_images/sync_containers-08v2pv2tmqqn.png" />
</div>
</div>
<dl>
<dt>Containers of same size:</dt><dd><p>If all containers have the same size, no modification is applied.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 g&#39;2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    g&#39;2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-e0yszxejbh.png" src="../_images/sync_containers-e0yszxejbh.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-2cgt4zds3h7.png" src="../_images/sync_containers-2cgt4zds3h7.png" />
</div>
</dd>
<dt>Underfull containers:</dt><dd><p>By default, this function closes the longest container by rewriting the
time signature of its last measure if necessary (if it is underfull),
and uses multi-measure rests whenever possible.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 g&#39;1 | f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    g&#39;1</span>
<span class="go">    \time 1/4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-nztndgecrof.png" src="../_images/sync_containers-nztndgecrof.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    \time 1/4</span>
<span class="go">    R1*1/4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-iaag195ty1d.png" src="../_images/sync_containers-iaag195ty1d.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">adjust_last_time_signature</span></code>:</dt><dd><p>To allow containers to be left open (with underfull measures), set the
keyword argument <code class="docutils literal notranslate"><span class="pre">adjust_last_time_signature</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 g&#39;1 | f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">adjust_last_time_signature</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    g&#39;1</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-37iesjp4dqs.png" src="../_images/sync_containers-37iesjp4dqs.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-lqm4itxlwu.png" src="../_images/sync_containers-lqm4itxlwu.png" />
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">use_multimeasure_rests</span></code>:</dt><dd><p>To disable multi-measure rests, set the keyword argument
<code class="docutils literal notranslate"><span class="pre">use_multimeasure_rests</span></code> to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 g&#39;1 | f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">use_multimeasure_rests</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    g&#39;1</span>
<span class="go">    \time 1/4</span>
<span class="go">    f&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-rhagiugx42o.png" src="../_images/sync_containers-rhagiugx42o.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    \time 1/4</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-oss03t1qnf8.png" src="../_images/sync_containers-oss03t1qnf8.png" />
</div>
</dd>
<dt>Adjusting last time signatures:</dt><dd><p>When adjusting the last time signature, this function will maintain the
same time effective signature for as long as possible and only add a
new one at the last measure if its duration is shorter.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 7/4 a&#39;1 ~ a&#39;2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 c&#39;2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    c&#39;2.</span>
<span class="go">    R1 * 3/4</span>
<span class="go">    \time 1/4</span>
<span class="go">    R1 * 1/4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-jhx0r9skgwi.png" src="../_images/sync_containers-jhx0r9skgwi.png" />
</div>
</dd>
<dt>Multiple input containers:</dt><dd><p>This function can take an arbitrary number of containers.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1 | g&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1 | g&#39;2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container3</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1 | g&#39;2.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container4</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">containers</span> <span class="o">=</span> <span class="p">[</span><span class="n">container1</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container2</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container3</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container4</span><span class="p">,</span>
<span class="gp">... </span>              <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    \time 3/4</span>
<span class="go">    g&#39;4</span>
<span class="go">    r2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-1wbsyvks33r.png" src="../_images/sync_containers-1wbsyvks33r.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    \time 3/4</span>
<span class="go">    g&#39;2</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-td1whqky24b.png" src="../_images/sync_containers-td1whqky24b.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container3</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    \time 3/4</span>
<span class="go">    g&#39;2.</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-g07scyil9jh.png" src="../_images/sync_containers-g07scyil9jh.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container4</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;1</span>
<span class="go">    \time 3/4</span>
<span class="go">    R1*3/4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-8b6vn3azaom.png" src="../_images/sync_containers-8b6vn3azaom.png" />
</div>
</dd>
<dt>Single input <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Score</span></code>:</dt><dd><p>This function can also take a single <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Score</span></code> instead of
multiple <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Container</span></code>’s or <code class="xref py py-class docutils literal notranslate"><span class="pre">abjad.Staff</span></code>’s.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">staff1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/8 c&#39;4. | d&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/8 c&#39;4. | d&#39;8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff3</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/8 c&#39;4. | d&#39;16&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staff4</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/8 c&#39;4.&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">([</span><span class="n">staff1</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">staff2</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">staff3</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">staff4</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">score</span><span class="p">)</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="go">\new Score</span>
<span class="go">&lt;&lt;</span>
<span class="go">    \new Staff</span>
<span class="go">    {</span>
<span class="go">        \time 3/8</span>
<span class="go">        c&#39;4.</span>
<span class="go">        \time 1/4</span>
<span class="go">        d&#39;4</span>
<span class="go">    }</span>
<span class="go">    \new Staff</span>
<span class="go">    {</span>
<span class="go">        \time 3/8</span>
<span class="go">        c&#39;4.</span>
<span class="go">        \time 1/4</span>
<span class="go">        d&#39;8</span>
<span class="go">        r8</span>
<span class="go">    }</span>
<span class="go">    \new Staff</span>
<span class="go">    {</span>
<span class="go">        \time 3/8</span>
<span class="go">        c&#39;4.</span>
<span class="go">        \time 1/4</span>
<span class="go">        d&#39;16</span>
<span class="go">        r8.</span>
<span class="go">    }</span>
<span class="go">    \new Staff</span>
<span class="go">    {</span>
<span class="go">        \time 3/8</span>
<span class="go">        c&#39;4.</span>
<span class="go">        \time 1/4</span>
<span class="go">        R1 * 1/4</span>
<span class="go">    }</span>
<span class="go">&gt;&gt;</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-0g0651fs0luq.png" src="../_images/sync_containers-0g0651fs0luq.png" />
</div>
</dd>
<dt>Time signature changes:</dt><dd><p>The containers can be of different length, can have different time
signatures, and can contain time signature changes as well.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 a2. \time 4/4 c&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container3</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 5/4 g&#39;&#39;1 ~ g&#39;&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container4</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 6/8 c&#39;2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">containers</span> <span class="o">=</span> <span class="p">[</span><span class="n">container1</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container2</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container3</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container4</span><span class="p">,</span>
<span class="gp">... </span>              <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container1</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 4/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    d&#39;4</span>
<span class="go">    e&#39;4</span>
<span class="go">    f&#39;4</span>
<span class="go">    \time 1/4</span>
<span class="go">    R1*1/4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-mec52wgbrz9.png" src="../_images/sync_containers-mec52wgbrz9.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container2</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 3/4</span>
<span class="go">    a2.</span>
<span class="go">    \time 2/4</span>
<span class="go">    c&#39;4</span>
<span class="go">    r4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-33odhzqyo6r.png" src="../_images/sync_containers-33odhzqyo6r.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container3</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 5/4</span>
<span class="go">    g&#39;&#39;1</span>
<span class="go">    ~</span>
<span class="go">    g&#39;&#39;4</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-s7rmadmd1f.png" src="../_images/sync_containers-s7rmadmd1f.png" />
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">container4</span><span class="p">)</span>
<span class="go">\new Staff</span>
<span class="go">{</span>
<span class="go">    \time 6/8</span>
<span class="go">    c&#39;2</span>
<span class="go">    r4</span>
<span class="go">    \time 2/4</span>
<span class="go">    R1*1/2</span>
<span class="go">}</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-msu922pcn6e.png" src="../_images/sync_containers-msu922pcn6e.png" />
</div>
</dd>
<dt>Polymetric notation:</dt><dd><p>It’s important to note that LilyPond does not support simultanoues
staves with different time signatures (i.e. polymetric notation) by
default. In order to enable it, the <code class="docutils literal notranslate"><span class="pre">&quot;Timing_translator&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">&quot;Default_bar_line_engraver&quot;</span></code> must be removed from the <code class="docutils literal notranslate"><span class="pre">Score</span></code>
context and added to the <code class="docutils literal notranslate"><span class="pre">Staff</span></code> context. Below is a full example of
how this can be accomplished using Abjad.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 c&#39;4 d&#39;4 e&#39;4 f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 3/4 a2. \time 4/4 c&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container3</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 5/4 g&#39;&#39;1 ~ g&#39;&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container4</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 6/8 c&#39;2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">containers</span> <span class="o">=</span> <span class="p">[</span><span class="n">container1</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container2</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container3</span><span class="p">,</span>
<span class="gp">... </span>              <span class="n">container4</span><span class="p">,</span>
<span class="gp">... </span>              <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">containers</span><span class="p">)</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">staves</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container1</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container2</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container3</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="n">abjad</span><span class="o">.</span><span class="n">Staff</span><span class="p">([</span><span class="n">container4</span><span class="p">]),</span>
<span class="gp">... </span>          <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Score</span><span class="p">(</span><span class="n">staves</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lilypond_file</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">LilyPondFile</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score_block</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;score&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layout_block</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Block</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;layout&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score_block</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score_block</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layout_block</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lilypond_file</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">score_block</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">layout_block</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<span class="gp">... </span>    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="sd">    \context {</span>
<span class="gp">... </span><span class="sd">        \Score</span>
<span class="gp">... </span><span class="sd">        \remove &quot;Timing_translator&quot;</span>
<span class="gp">... </span><span class="sd">        \remove &quot;Default_bar_line_engraver&quot;</span>
<span class="gp">... </span><span class="sd">    }</span>
<span class="gp">... </span><span class="sd">    \context {</span>
<span class="gp">... </span><span class="sd">        \Staff</span>
<span class="gp">... </span><span class="sd">        \consists &quot;Timing_translator&quot;</span>
<span class="gp">... </span><span class="sd">        \consists &quot;Default_bar_line_engraver&quot;</span>
<span class="gp">... </span><span class="sd">    }</span>
<span class="gp">... </span><span class="sd">    &#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abjad</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">lilypond_file</span><span class="p">)</span>
<span class="go">\score { %! abjad.LilyPondFile._get_formatted_blocks()</span>
<span class="go">    \new Score</span>
<span class="go">    &lt;&lt;</span>
<span class="go">        \new Staff</span>
<span class="go">        {</span>
<span class="go">            {</span>
<span class="go">                \time 4/4</span>
<span class="go">                c&#39;4</span>
<span class="go">                d&#39;4</span>
<span class="go">                e&#39;4</span>
<span class="go">                f&#39;4</span>
<span class="go">                \time 1/4</span>
<span class="go">                R1 * 1/4</span>
<span class="go">            }</span>
<span class="go">        }</span>
<span class="go">        \new Staff</span>
<span class="go">        {</span>
<span class="go">            {</span>
<span class="go">                \time 3/4</span>
<span class="go">                a2.</span>
<span class="go">                \time 2/4</span>
<span class="go">                c&#39;4</span>
<span class="go">                r4</span>
<span class="go">            }</span>
<span class="go">        }</span>
<span class="go">        \new Staff</span>
<span class="go">        {</span>
<span class="go">            {</span>
<span class="go">                \time 5/4</span>
<span class="go">                g&#39;&#39;1</span>
<span class="go">                ~</span>
<span class="go">                g&#39;&#39;4</span>
<span class="go">            }</span>
<span class="go">        }</span>
<span class="go">        \new Staff</span>
<span class="go">        {</span>
<span class="go">            {</span>
<span class="go">                \time 6/8</span>
<span class="go">                c&#39;2</span>
<span class="go">                r4</span>
<span class="go">                \time 2/4</span>
<span class="go">                R1 * 1/2</span>
<span class="go">            }</span>
<span class="go">        }</span>
<span class="go">    &gt;&gt;</span>
<span class="go">    \layout {</span>
<span class="go">        \context {</span>
<span class="go">            \Score</span>
<span class="go">            \remove &quot;Timing_translator&quot;</span>
<span class="go">            \remove &quot;Default_bar_line_engraver&quot;</span>
<span class="go">        }</span>
<span class="go">        \context {</span>
<span class="go">            \Staff</span>
<span class="go">            \consists &quot;Timing_translator&quot;</span>
<span class="go">            \consists &quot;Default_bar_line_engraver&quot;</span>
<span class="go">        }</span>
<span class="go">    }</span>
<span class="go">} %! abjad.LilyPondFile._get_formatted_blocks()</span>
</pre></div>
</div>
<div class="figure align-default">
<img alt="../_images/sync_containers-1lbrepesgil.png" src="../_images/sync_containers-1lbrepesgil.png" />
</div>
</dd>
</dl>
<div class="admonition error">
<p class="admonition-title">Error</p>
<p>If one or more containers is malformed, i.e. it has an underfilled
measure before a time signature change, the function raises a
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> exception.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">container1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 4/4 g&#39;1 | f&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">container2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Container</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\time 5/4 c&#39;1 | \time 4/4 d&#39;4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">auxjad</span><span class="o">.</span><span class="n">mutate</span><span class="p">([</span><span class="n">container1</span><span class="p">,</span> <span class="n">container2</span><span class="p">])</span><span class="o">.</span><span class="n">sync_containers</span><span class="p">()</span>
<span class="go">ValueError: at least one &#39;container&#39; is malformed, with an underfull</span>
<span class="go">measure preceding a time signature change</span>
</pre></div>
</div>
</div>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="auxjad.mutate.html" class="btn btn-neutral float-left" title="mutate" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Gilberto Agostinho

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>