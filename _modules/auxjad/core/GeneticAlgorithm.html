

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>auxjad.core.GeneticAlgorithm &mdash; auxjad 0.8.25 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> auxjad
          

          
          </a>

          
            
            
              <div class="version">
                0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Welcome to Auxjadâ€™s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/index.html">Examples of usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../score_gallery/index.html">Score gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">Auxjad API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">auxjad</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>auxjad.core.GeneticAlgorithm</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for auxjad.core.GeneticAlgorithm</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>


<div class="viewcode-block" id="GeneticAlgorithm"><a class="viewcode-back" href="../../../_api_members/auxjad.GeneticAlgorithm.html#auxjad.GeneticAlgorithm">[docs]</a><span class="k">class</span> <span class="nc">GeneticAlgorithm</span><span class="p">():</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;An implementation of a genetic algorithm. Takes a :attr:`target` list</span>
<span class="sd">    and a list of :attr:`genes` to prod`uce generations of individuals at each</span>
<span class="sd">    :meth:`__call__`. Fittest individual of the current generation can be</span>
<span class="sd">    accessed directly using the property :attr:`fittest_individual`.</span>

<span class="sd">    Basic usage:</span>
<span class="sd">        The genetic algorithm should be initialised with two :obj:`list`&#39;s of</span>
<span class="sd">        objects. The elements of these :obj:`list` can be of any type. The</span>
<span class="sd">        first one is the :attr:`target` list used to evaluate the individuals</span>
<span class="sd">        in the population. The second is the :attr:`genes` list which should</span>
<span class="sd">        contain all possible elements that can make up an individual. All</span>
<span class="sd">        elements of :attr:`target` must also be present in :attr:`genes`. For</span>
<span class="sd">        this example, :attr:`population_size` will be set to a very small value</span>
<span class="sd">        of ``4``, though in practice it&#39;s better to use substantially larger</span>
<span class="sd">        numbers (default value is ``100``). :attr:`select_n_parents` also needs</span>
<span class="sd">        to be decreased, as it must always be smaller than</span>
<span class="sd">        :attr:`population_size`.</span>

<span class="sd">        &gt;&gt;&gt; ga = auxjad.GeneticAlgorithm(</span>
<span class="sd">        ...     target=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;],</span>
<span class="sd">        ...     genes=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;],</span>
<span class="sd">        ...     population_size=4,</span>
<span class="sd">        ...     select_n_parents=2,</span>
<span class="sd">        ... )</span>

<span class="sd">        Calling the GA generator will generate a :attr:`population` of</span>
<span class="sd">        individuals, each of wich will also be awarded a score according to an</span>
<span class="sd">        evaluation function. :attr:`population` and :attr:`scores` are always</span>
<span class="sd">        ordered from the fittest to the least fit.</span>

<span class="sd">        &gt;&gt;&gt; ga()</span>
<span class="sd">        &gt;&gt;&gt; ga.population</span>
<span class="sd">        [[&#39;A&#39;, &#39;J&#39;, &#39;J&#39;, &#39;B&#39;, &#39;H&#39;],</span>
<span class="sd">         [&#39;D&#39;, &#39;A&#39;, &#39;E&#39;, &#39;A&#39;, &#39;F&#39;],</span>
<span class="sd">         [&#39;F&#39;, &#39;F&#39;, &#39;A&#39;, &#39;F&#39;, &#39;F&#39;],</span>
<span class="sd">         [&#39;F&#39;, &#39;F&#39;, &#39;E&#39;, &#39;J&#39;, &#39;C&#39;],</span>
<span class="sd">         ]</span>
<span class="sd">        &gt;&gt;&gt; ga.scores</span>
<span class="sd">        [0.209603072,</span>
<span class="sd">         0.0912,</span>
<span class="sd">         0.05638400000000001,</span>
<span class="sd">         0.016396800000000003,</span>
<span class="sd">         ]</span>

<span class="sd">        Each subsequent call will generate a new generation of individuals</span>
<span class="sd">        which will become increasingly fit.</span>

<span class="sd">    :attr:`fittest_individual` and :attr:`fittest_individual_score`:</span>
<span class="sd">        The fittest individual of the whole population can be directly</span>
<span class="sd">        accessed using the property :attr:`fittest_individual`:</span>

<span class="sd">        &gt;&gt;&gt; ga = auxjad.GeneticAlgorithm(</span>
<span class="sd">        ...     target=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;],</span>
<span class="sd">        ...     genes=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;],</span>
<span class="sd">        ...     population_size=4,</span>
<span class="sd">        ...     select_n_parents=2,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; ga()</span>
<span class="sd">        &gt;&gt;&gt; ga.fittest_individual</span>
<span class="sd">        [&#39;A&#39;, &#39;J&#39;, &#39;J&#39;, &#39;B&#39;, &#39;H&#39;]</span>

<span class="sd">        Its score is also directly accessible using</span>
<span class="sd">        :attr:`fittest_individual_score`:</span>

<span class="sd">        &gt;&gt;&gt; ga.fittest_individual_score</span>
<span class="sd">        0.209603072</span>

<span class="sd">    Evolution:</span>
<span class="sd">        As expected, each generation will become increasingly fit in relation</span>
<span class="sd">        to the :attr:`target`. Setting :attr:`population_size` to ``50`` and</span>
<span class="sd">        running the genetic algorithm for ``10`` iterations,</span>

<span class="sd">        &gt;&gt;&gt; ga = auxjad.GeneticAlgorithm(</span>
<span class="sd">        ...     target=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;],</span>
<span class="sd">        ...     genes=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;],</span>
<span class="sd">        ...     population_size=50,</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; for _ in range(10):</span>
<span class="sd">        ...     ga()</span>
<span class="sd">        ...     print(ga.fittest_individual, ga.fittest_individual_score)</span>
<span class="sd">        [&#39;A&#39;, &#39;J&#39;, &#39;B&#39;, &#39;E&#39;, &#39;E&#39;] 0.480000512</span>
<span class="sd">        [&#39;A&#39;, &#39;H&#39;, &#39;C&#39;, &#39;D&#39;, &#39;J&#39;] 0.6000768</span>
<span class="sd">        [&#39;A&#39;, &#39;C&#39;, &#39;D&#39;, &#39;D&#39;, &#39;E&#39;] 0.6799999999999999</span>
<span class="sd">        [&#39;A&#39;, &#39;C&#39;, &#39;D&#39;, &#39;D&#39;, &#39;E&#39;] 0.6799999999999999</span>
<span class="sd">        [&#39;A&#39;, &#39;C&#39;, &#39;D&#39;, &#39;D&#39;, &#39;E&#39;] 0.6799999999999999</span>
<span class="sd">        [&#39;A&#39;, &#39;C&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;] 0.8400000000000001</span>
<span class="sd">        [&#39;A&#39;, &#39;C&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;] 0.8400000000000001</span>
<span class="sd">        [&#39;A&#39;, &#39;C&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;] 0.8400000000000001</span>
<span class="sd">        [&#39;A&#39;, &#39;C&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;] 0.8400000000000001</span>
<span class="sd">        [&#39;A&#39;, &#39;C&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;] 0.8400000000000001</span>

<span class="sd">    Evaluation function and :attr:`evaluation_index`:</span>
<span class="sd">        The evaluation function gives out a score between ``0.0`` to ``1.0`` to</span>
<span class="sd">        each individual in the population. For each given individual, this</span>
<span class="sd">        function compares each element of its elements with the element in the</span>
<span class="sd">        :attr:`target` at the same index. As to accomodate arbitrary objects</span>
<span class="sd">        being used as genes (as opposed to numbers only), this comparison uses</span>
<span class="sd">        the distance between the current individual and target genes using the</span>
<span class="sd">        :attr:`genes` property. Consider the following example, where the</span>
<span class="sd">        available genes are ``[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;]`` and the target</span>
<span class="sd">        is ``[&#39;B&#39;, &#39;A&#39;, &#39;A&#39;, &#39;C&#39;]``. Suppose an individual has the genes</span>
<span class="sd">        ``[&#39;D&#39;, &#39;D&#39;, &#39;A&#39;, &#39;B&#39;]``.</span>

<span class="sd">        To evaluate this individual, first the algorithm finds the indices of</span>
<span class="sd">        both the target&#39;s genes (in this case, ``[1, 0, 0, 2]``) and also of</span>
<span class="sd">        the individual to be evaluated (in this case, ``[3, 3, 0, 1]``). It</span>
<span class="sd">        then scores each element of this individual against the target using:</span>

<span class="sd">        .. code-block::</span>

<span class="sd">            difference = abs(target_gene_index - individual_gene_index)</span>
<span class="sd">            element_score = evaluation_index ** difference</span>

<span class="sd">        Thus, when the difference is ``0``, the score of this element is</span>
<span class="sd">        ``1.0``. The higher the difference, the smaller the value; this decay</span>
<span class="sd">        can be controlled using the property :attr:`evaluation_index`, whose</span>
<span class="sd">        default value is ``0.2``. Thus when the difference is ``1`` or ``-1``,</span>
<span class="sd">        the score is ``0.2 ** 1 = 0.2``, when the difference is ``2`` or</span>
<span class="sd">        ``-2``, the score is ``0.2 ** 2 = 0.04``, and so on. The total score of</span>
<span class="sd">        an individual will be given by the normalised sum of the evaluation of</span>
<span class="sd">        each of its genes.</span>

<span class="sd">    :attr:`select_n_parents` and :attr:`keep_n_parents`:</span>
<span class="sd">        When creating a new generation of individuals, the algorithm will</span>
<span class="sd">        select the fittest individuals to be parents for the next generation.</span>
<span class="sd">        The number of parents is given by :attr:`select_n_parents`, whose</span>
<span class="sd">        default value is ``10``. These parents generate offspring by being</span>
<span class="sd">        recombined through a crossover process, in which the first half of a</span>
<span class="sd">        random parent and a second half of another random parent are combined</span>
<span class="sd">        into a new individual. Parents are not kept in the next generation by</span>
<span class="sd">        default and are solely used in this crossover process. To &#39;clone&#39;</span>
<span class="sd">        parents into the next generation, set the property</span>
<span class="sd">        :attr:`keep_n_parents` to a value larger than ``0`` (its default</span>
<span class="sd">        value).</span>

<span class="sd">    :attr:`mutation_chance` and :attr:`mutation_index`:</span>
<span class="sd">        After the crossover process, an individual can go through random</span>
<span class="sd">        mutations. The chance of this occuring on a given individual is given</span>
<span class="sd">        by :attr:`mutation_chance`, whose value should range between ``0.0``</span>
<span class="sd">        and ``1.0`` (default is ``0.2``). If an individual is selected to</span>
<span class="sd">        undergo a random mutation, then each of its genes will have a chance of</span>
<span class="sd">        being mutated, which in turn is given by the property</span>
<span class="sd">        :attr:`mutation_index` (default value is ``0.1``).</span>

<span class="sd">    :attr:`initial_individual`:</span>
<span class="sd">        Instead of starting with a random population of individuals, it&#39;s</span>
<span class="sd">        possible to set a custom initial individual as a starting point. This</span>
<span class="sd">        can be used to &#39;morph&#39; fittest individual from this initial one to a</span>
<span class="sd">        fit one according to the target.</span>

<span class="sd">        &gt;&gt;&gt; ga = auxjad.GeneticAlgorithm(</span>
<span class="sd">        ...     target=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;],</span>
<span class="sd">        ...     genes=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;],</span>
<span class="sd">        ...     initial_individual=[&#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;],</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; for _ in range(10):</span>
<span class="sd">        ...     ga()</span>
<span class="sd">        ...     ga.fittest_individual</span>
<span class="sd">        [&#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;]</span>
<span class="sd">        [&#39;F&#39;, &#39;B&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;]</span>
<span class="sd">        [&#39;F&#39;, &#39;B&#39;, &#39;H&#39;, &#39;I&#39;, &#39;E&#39;]</span>
<span class="sd">        [&#39;F&#39;, &#39;B&#39;, &#39;H&#39;, &#39;I&#39;, &#39;E&#39;]</span>
<span class="sd">        [&#39;A&#39;, &#39;B&#39;, &#39;H&#39;, &#39;I&#39;, &#39;E&#39;]</span>
<span class="sd">        [&#39;A&#39;, &#39;B&#39;, &#39;E&#39;, &#39;I&#39;, &#39;E&#39;]</span>
<span class="sd">        [&#39;A&#39;, &#39;B&#39;, &#39;E&#39;, &#39;D&#39;, &#39;E&#39;]</span>
<span class="sd">        [&#39;A&#39;, &#39;B&#39;, &#39;E&#39;, &#39;D&#39;, &#39;E&#39;]</span>
<span class="sd">        [&#39;A&#39;, &#39;B&#39;, &#39;E&#39;, &#39;D&#39;, &#39;E&#39;]</span>
<span class="sd">        [&#39;A&#39;, &#39;B&#39;, &#39;D&#39;, &#39;D&#39;, &#39;E&#39;]</span>

<span class="sd">    :meth:`reset`:</span>
<span class="sd">        Use the :meth:`reset` method to reset the genetic algorithm at any</span>
<span class="sd">        point:</span>

<span class="sd">        &gt;&gt;&gt; ga = auxjad.GeneticAlgorithm(</span>
<span class="sd">        ...     target=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;],</span>
<span class="sd">        ...     genes=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39;, &#39;H&#39;, &#39;I&#39;, &#39;J&#39;],</span>
<span class="sd">        ... )</span>
<span class="sd">        &gt;&gt;&gt; ga.fittest_individual</span>
<span class="sd">        None</span>
<span class="sd">        &gt;&gt;&gt; ga.generation_number</span>
<span class="sd">        None</span>
<span class="sd">        &gt;&gt;&gt; for _ in range(10):</span>
<span class="sd">        ...     ga()</span>
<span class="sd">        &gt;&gt;&gt; ga.fittest_individual</span>
<span class="sd">        [&#39;C&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;]</span>
<span class="sd">        &gt;&gt;&gt; ga.generation_number</span>
<span class="sd">        9</span>
<span class="sd">        &gt;&gt;&gt; ga.reset()</span>
<span class="sd">        &gt;&gt;&gt; ga.fittest_individual</span>
<span class="sd">        None</span>
<span class="sd">        &gt;&gt;&gt; ga.generation_number</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ###</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_target&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_genes&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_initial_individual&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_population_size&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_select_n_parents&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_keep_n_parents&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_mutation_chance&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_mutation_index&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_evaluation_index&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_target_indices&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_scores&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_generation_number&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;_population&#39;</span><span class="p">,</span>
                 <span class="p">)</span>

    <span class="c1">### INITIALISER ###</span>

<div class="viewcode-block" id="GeneticAlgorithm.__init__"><a class="viewcode-back" href="../../../_api_members/auxjad.GeneticAlgorithm.html#auxjad.GeneticAlgorithm.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="o">*</span><span class="p">,</span>
                 <span class="n">target</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
                 <span class="n">genes</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
                 <span class="n">initial_individual</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">population_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
                 <span class="n">select_n_parents</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
                 <span class="n">keep_n_parents</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="n">mutation_chance</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
                 <span class="n">mutation_index</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
                 <span class="n">evaluation_index</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span>
                 <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;Initialises self.&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">genes</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;genes&#39; must be &#39;list&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;target&#39; must be &#39;list&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">genes</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">target</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;target&#39; must only contain elements present in &quot;</span>
                             <span class="s2">&quot;&#39;genes&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_genes</span> <span class="o">=</span> <span class="n">genes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target</span> <span class="o">=</span> <span class="n">target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_indices</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_genes</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">gene</span><span class="p">)</span> <span class="k">for</span> <span class="n">gene</span>
                                <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initial_individual</span> <span class="o">=</span> <span class="n">initial_individual</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">population_size</span> <span class="o">=</span> <span class="n">population_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">select_n_parents</span> <span class="o">=</span> <span class="n">select_n_parents</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keep_n_parents</span> <span class="o">=</span> <span class="n">keep_n_parents</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_chance</span> <span class="o">=</span> <span class="n">mutation_chance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_index</span> <span class="o">=</span> <span class="n">mutation_index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evaluation_index</span> <span class="o">=</span> <span class="n">evaluation_index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_generation_number</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_population</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scores</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="c1">### SPECIAL METHODS ###</span>

<div class="viewcode-block" id="GeneticAlgorithm.__repr__"><a class="viewcode-back" href="../../../_api_members/auxjad.GeneticAlgorithm.html#auxjad.GeneticAlgorithm.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;Returns interpreter representation of :attr:`target`.&#39;</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target</span><span class="p">)</span></div>

<div class="viewcode-block" id="GeneticAlgorithm.__len__"><a class="viewcode-back" href="../../../_api_members/auxjad.GeneticAlgorithm.html#auxjad.GeneticAlgorithm.__len__">[docs]</a>    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;Returns the number of genes in each individual.&#39;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target</span><span class="p">)</span></div>

<div class="viewcode-block" id="GeneticAlgorithm.__call__"><a class="viewcode-back" href="../../../_api_members/auxjad.GeneticAlgorithm.html#auxjad.GeneticAlgorithm.__call__">[docs]</a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Calls the genetic algorithm process for one iteration. Creates a</span>
<span class="sd">        new generation of length :attr:`population_size` via reproduction and</span>
<span class="sd">        mutation processes and scores each individual using the evaluation</span>
<span class="sd">        function. Sorts the population according to their scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_generate_population</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_score_population</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_sort_population_by_evaluation</span><span class="p">()</span></div>

<div class="viewcode-block" id="GeneticAlgorithm.__next__"><a class="viewcode-back" href="../../../_api_members/auxjad.GeneticAlgorithm.html#auxjad.GeneticAlgorithm.__next__">[docs]</a>    <span class="k">def</span> <span class="fm">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Calls the genetic algorithm process for one iteration. Creates a</span>
<span class="sd">        new generation of length :attr:`population_size` via reproduction and</span>
<span class="sd">        mutation processes and scores each individual using the evaluation</span>
<span class="sd">        function. Sorts the population according to their scores.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__call__</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span></div>

<div class="viewcode-block" id="GeneticAlgorithm.__iter__"><a class="viewcode-back" href="../../../_api_members/auxjad.GeneticAlgorithm.html#auxjad.GeneticAlgorithm.__iter__">[docs]</a>    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;Returns an iterator, allowing instances to be used as iterators.&#39;</span>
        <span class="k">return</span> <span class="bp">self</span></div>

    <span class="c1">### PUBLIC METHODS ###</span>

<div class="viewcode-block" id="GeneticAlgorithm.reset"><a class="viewcode-back" href="../../../_api_members/auxjad.GeneticAlgorithm.html#auxjad.GeneticAlgorithm.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;Resets that genetic algorithm.&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_generation_number</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_population</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scores</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="c1">### PRIVATE METHODS ###</span>

    <span class="k">def</span> <span class="nf">_generate_population</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Calls the genetic algorithm process for one iteration. Creates a</span>
<span class="sd">        new generation of length :attr:`population_size` via reproduction and</span>
<span class="sd">        mutation processes and scores each individual using the evaluation</span>
<span class="sd">        function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generation_number</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_generation_number</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_generate_initial_individual</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_generation_number</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_crossover_population</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_mutate_population</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_generate_initial_individual</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Generates a random initial population of size</span>
<span class="sd">        :attr:`population_size` and whose genes are randomly chosen from</span>
<span class="sd">        :attr:`genes`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_population</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_population_size</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_individual</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">individual</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_genes</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span>
                              <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__len__</span><span class="p">())]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">individual</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_individual</span><span class="p">[:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">individual</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                  <span class="n">individual</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
                  <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Evaluates all genes of a given individual, returning a</span>
<span class="sd">        :obj:`float`. The higher the value, the fitter the individual is, with</span>
<span class="sd">        `1.0` being a perfect fit. Use :attr:`evaluation_index` to tweak the</span>
<span class="sd">        behaviour of this function.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">individual_score</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">individual_indices</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">genes</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">gene</span><span class="p">)</span> <span class="k">for</span> <span class="n">gene</span> <span class="ow">in</span> <span class="n">individual</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">gene</span><span class="p">,</span> <span class="n">target_gene</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">individual_indices</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_indices</span><span class="p">):</span>
            <span class="n">difference</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">gene</span> <span class="o">-</span> <span class="n">target_gene</span><span class="p">)</span>
            <span class="n">individual_score</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evaluation_index</span> <span class="o">**</span> <span class="n">difference</span>
        <span class="n">individual_score</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">individual_score</span>

    <span class="k">def</span> <span class="nf">_sort_population_by_evaluation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Sorts the population (and their scores) according to the evaluation</span>
<span class="sd">        of its individuals.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">zipped_lists</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scores</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population</span><span class="p">))</span>
        <span class="n">zipped_lists</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span>
            <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">tuple_pair</span><span class="p">:</span> <span class="n">tuple_pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_population</span> <span class="o">=</span> <span class="p">[</span><span class="n">gene</span> <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">gene</span> <span class="ow">in</span> <span class="n">zipped_lists</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scores</span> <span class="o">=</span> <span class="p">[</span><span class="n">score</span> <span class="k">for</span> <span class="n">score</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">zipped_lists</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_score_population</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Generates the list of score for each individual of the current</span>
<span class="sd">        generation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_scores</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">individual</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population</span><span class="p">:</span>
            <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evaluate</span><span class="p">(</span><span class="n">individual</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_crossover_population</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;Crossover process used to generate offsprings.&#39;</span>
        <span class="n">selected_parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">_select_n_parents</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_n_parents</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_generation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population</span><span class="p">[:</span><span class="bp">self</span><span class="o">.</span><span class="n">_keep_n_parents</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_generation</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_population_size</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_n_parents</span><span class="p">):</span>
            <span class="n">parents</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">selected_parents</span><span class="p">)),</span>
                                    <span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                    <span class="p">)</span>
            <span class="n">half_index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">parent_A</span> <span class="o">=</span> <span class="n">selected_parents</span><span class="p">[</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">parent_B</span> <span class="o">=</span> <span class="n">selected_parents</span><span class="p">[</span><span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="n">individual</span> <span class="o">=</span> <span class="n">parent_A</span><span class="p">[:</span><span class="n">half_index</span><span class="p">]</span> <span class="o">+</span> <span class="n">parent_B</span><span class="p">[</span><span class="n">half_index</span><span class="p">:]</span>
            <span class="n">new_generation</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">individual</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_population</span> <span class="o">=</span> <span class="n">new_generation</span><span class="p">[:]</span>

    <span class="k">def</span> <span class="nf">_mutate_population</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Mutates some individuals of the current generation according to</span>
<span class="sd">        :attr:`mutation_chance` and :attr:`mutation_index`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">individual</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_population</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mutation_chance</span><span class="p">:</span>
                <span class="n">mutated_individual</span> <span class="o">=</span> <span class="n">individual</span><span class="p">[:]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mutation_index</span><span class="p">:</span>
                        <span class="n">mutated_individual</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_genes</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_population</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">mutated_individual</span>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;Target individual used for evaluation.&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target</span>

    <span class="nd">@target</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">target</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
               <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;target&#39; must be &#39;list&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_genes</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">target</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;target&#39; must only contain elements present in &quot;</span>
                             <span class="s2">&quot;&#39;genes&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target</span> <span class="o">=</span> <span class="n">target</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_indices</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_genes</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">gene</span><span class="p">)</span> <span class="k">for</span> <span class="n">gene</span>
                                <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">genes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;List of possible genes that make up all individuals.&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_genes</span>

    <span class="nd">@genes</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">genes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
              <span class="n">genes</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
              <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">genes</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;genes&#39; must be &#39;list&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_genes</span> <span class="o">=</span> <span class="n">genes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_indices</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_genes</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">gene</span><span class="p">)</span> <span class="k">for</span> <span class="n">gene</span>
                                <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">initial_individual</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sa">r</span><span class="s1">&#39;Optional initial individual (instead of random initial population).&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initial_individual</span>

    <span class="nd">@initial_individual</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">initial_individual</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">initial_individual</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">],</span>
                           <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">initial_individual</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">initial_individual</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;initial_individual&#39; must be &#39;list&#39; or &quot;</span>
                                <span class="s2">&quot;&#39;None&#39;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">initial_individual</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__len__</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;initial_individual&#39; must have the same &quot;</span>
                                 <span class="s2">&quot;length as &#39;target&#39;&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">value</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_genes</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">initial_individual</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;initial_individual&#39; must only contain &quot;</span>
                                 <span class="s2">&quot;elements present in &#39;genes&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_initial_individual</span> <span class="o">=</span> <span class="n">initial_individual</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">population_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;Number of individuals in any given generation.&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population_size</span>

    <span class="nd">@population_size</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">population_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">population_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">population_size</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;population_size&#39; must be &#39;int&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_population_size</span> <span class="o">=</span> <span class="n">population_size</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">select_n_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Number of the best-fit individuals that are selected to be the</span>
<span class="sd">        parents for the next generation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_n_parents</span>

    <span class="nd">@select_n_parents</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">select_n_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">select_n_parents</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                         <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">select_n_parents</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;select_n_parents&#39; must be &#39;int&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">select_n_parents</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population_size</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;select_n_parents&#39; must be equal to or smaller &quot;</span>
                             <span class="s2">&quot;than &#39;population_size&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_select_n_parents</span> <span class="o">=</span> <span class="n">select_n_parents</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">keep_n_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Number of the best-fit individuals that survive into the next</span>
<span class="sd">        generation. Default is ``0``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keep_n_parents</span>

    <span class="nd">@keep_n_parents</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">keep_n_parents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">keep_n_parents</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
                       <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">keep_n_parents</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;keep_n_parents&#39; must be &#39;int&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">keep_n_parents</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population_size</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;keep_n_parents&#39; must be equal to or smaller &quot;</span>
                             <span class="s2">&quot;than &#39;population_size&#39;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keep_n_parents</span> <span class="o">=</span> <span class="n">keep_n_parents</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mutation_chance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="s1">&#39;The chance of any given individual experiencing mutation.&#39;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mutation_chance</span>

    <span class="nd">@mutation_chance</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">mutation_chance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                        <span class="n">mutation_chance</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                        <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mutation_chance</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;mutation_chance&#39; must be &#39;float&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mutation_chance</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;mutation_chance&#39; must be a positive `float`&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">mutation_chance</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;mutation_chance&#39; cannot be larger than `1.0`&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mutation_chance</span> <span class="o">=</span> <span class="n">mutation_chance</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mutation_index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Given an individual selected to undergo mutation, this index gives</span>
<span class="sd">        the percentage of genes of that individual which will be mutated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mutation_index</span>

    <span class="nd">@mutation_index</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">mutation_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">mutation_index</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                       <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mutation_index</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;mutation_index&#39; must be &#39;float&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mutation_index</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;mutation_index&#39; must be a positive `float`&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">mutation_index</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;mutation_index&#39; cannot be larger than `1.0`&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_mutation_index</span> <span class="o">=</span> <span class="n">mutation_index</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">evaluation_index</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;The index used in the evaluation function. This index will be</span>
<span class="sd">        raised by the difference between indices of the target value and the</span>
<span class="sd">        current value. Consider the following example, where the available</span>
<span class="sd">        genes are ``[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;]`` and the target is</span>
<span class="sd">        ``[&#39;B&#39;, &#39;A&#39;, &#39;A&#39;, &#39;C&#39;]``. Suppose an individual has the genes</span>
<span class="sd">        ``[&#39;D&#39;, &#39;D&#39;, &#39;A&#39;, &#39;B&#39;]``.</span>

<span class="sd">        To evaluate this individual, first the algorithm finds the indices of</span>
<span class="sd">        both the target&#39;s genes (in this case, ``[1, 0, 0, 2]``) and also of</span>
<span class="sd">        the individual to be evaluated (in this case, ``[3, 3, 0, 1]``). It</span>
<span class="sd">        then scores each element of this individual against the target using:</span>

<span class="sd">        .. code-block::</span>

<span class="sd">            difference = abs(target_gene_index - individual_gene_index)</span>
<span class="sd">            element_score = evaluation_index ** difference</span>

<span class="sd">        Thus, when the difference is ``0``, the score of this element is</span>
<span class="sd">        ``1.0``. The higher the difference, the smaller the value; this decay</span>
<span class="sd">        can be controlled using this very property, whose default value is</span>
<span class="sd">        ``0.2``. Thus when the difference is ``1`` or ``-1``, the score is</span>
<span class="sd">        ``0.2 ** 1 = 0.2``, when the difference is ``2`` or ``-2``, the score</span>
<span class="sd">        is ``0.2 ** 2 = 0.04``, and so on. The total score of an individual</span>
<span class="sd">        will be given by the normalised sum of the evaluation of each of its</span>
<span class="sd">        genes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_evaluation_index</span>

    <span class="nd">@evaluation_index</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">evaluation_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                         <span class="n">evaluation_index</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                         <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">evaluation_index</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;&#39;evaluation_index&#39; must be &#39;float&#39;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">evaluation_index</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;evaluation_index&#39; must be a greater than 0.0&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">evaluation_index</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;evaluation_index&#39; must be less than `1.0`&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_evaluation_index</span> <span class="o">=</span> <span class="n">evaluation_index</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">generation_number</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Read-only property, returns the number of the current generation</span>
<span class="sd">        (initial generation is ``0``).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generation_number</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">population</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Read-only property, returns a list with all the population of the</span>
<span class="sd">        current generation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scores</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Read-only property, returns the list of individual scores of the</span>
<span class="sd">        current population. Scores are normalised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scores</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fittest_individual</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Read-only property, returns the fittest individual of the current</span>
<span class="sd">        population.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_population</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fittest_individual_score</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Read-only property, returns the score of the fittest individual of</span>
<span class="sd">        the current population.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scores</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Gilberto Agostinho.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>